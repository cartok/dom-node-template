!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1);var a=((r=o)&&r.__esModule?r:{default:r}).default;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(2)),a=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.filter(function(e){return void 0!==a.default.find(function(t){return t===e})});["svg","image","style","script"].forEach(function(e){var t=s.findIndex(function(t){return e===t});s.splice(t,1)});var l={},c="http://www.w3.org/2000/svg",d="http://www.w3.org/1999/xhtml",u=new window.DOMParser,f=(void 0!==window&&void 0!==window.document&&window.document.createRange,new WeakMap,new WeakMap,function(){function e(t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw new Error("you need to provide a xml string as first parameter.");(n=Object.assign({},l,n)).svg;this.text=function(e,t){var n=t=Object.assign({},t),r=n.removeComments;n.replaceAttributeValueQuotes;r&&(e=(e=(e=e.replace(/\s*\/\/.*?$/gm,"")).replace(/\/\*{1,}[^]*?\*\//,"")).replace(/\<\!\-\-[^]*?\-\-\>/g,""));e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\n\t\r]/g,"")).replace(/\s{2,}/g," ")).replace(/;([^\s])/g,"; $1")).replace(/\s(">)/g,"$1")).replace(/>\s*</g,"><")).replace(/^(\s*)|(\s*)$/g,"")).replace(/>\s*/g,">")).replace(/\s*</g,"<")).replace(/(<\w+)(\s{2,})/g,"$1 ")).replace(/([\w-_]+="[\w\s-_]+")(\s*(?!>))/g,"$1 ")).replace(/([\w-_]+="[\w\s-_]+")(\s{2,})>/g,"$1>");return e}(t,{removeComments:!0}),this.tagGroups=g(this.text),this.fragment=window.document.createDocumentFragment(),this.tagGroups.forEach(function(e){var t=function e(t,n){var r=0;var i=0;var l=0;n=Object.assign({},n);var f=n,E=f.type,N=f.addXMLNS;if(void 0===E){var M=b(t);if(N=!0,E=void 0,"div"===M)E="html";else if("svg"===M||"g"===M||"foreignObject"===M)E="svg";else if(s.includes(M)){var C=function(e){console.warn("You provided an <"+e+"></"+e+"> tag as a tag-group (or root node, referring to the string input context)."),console.warn("The <"+e+"></"+e+"> tag exists in HTML and SVG namespace."),console.warn("In this situation, as default, it will be handled like "+E.toUpperCase()+"."),"html"===E?(console.warn('It will have xmlns="http://www.w3.org/1999/xhtml" set, and parsed as "text/html" by the \'DOMParser\'.'),console.warn('You can force SVG creation by passing a true set boolean at "options.mutual.a.isSVG", to the optional parameters object in the constructor call.'),console.warn("\nEXAMLPLE:"),console.warn("const svgContent = new NodeTemplate(`<"+e+"></"+e+">`, { mutual: { "+e+": { isSVG: true } } })")):"svg"===E&&(console.warn('It will have xmlns="http://www.w3.org/2000/svg" set, and parsed as "image/svg+xml" by the \'DOMParser\'.'),console.warn('You can force HTML creation by passing a true set boolean at "options.mutual.a.isHTML", to the optional parameters object in the constructor call.'),console.warn("\nEXAMLPLE:"),console.warn("const htmlContent = new NodeTemplate(`<"+e+"></"+e+">`, { mutual: { "+e+": { isHTML: true } } })"))};switch(M){case"script":case"style":N=!1,E="html";break;case"audio":case"canvas":case"iframe":case"video":E="html";break;case"font":case"title":n.mutual.a.isHTML?E="html":(E="svg",C("title"===M?"title":"font"));break;case"a":n.mutual.a.isSVG?E="svg":(E="html",C("a"))}}else if(o.default.includes(M))E="html";else{if(!a.default.includes(M))throw new Error("Could not detect type for tagName: "+M+".");E="svg"}}void 0===N&&(N=!0);if(N){if(void 0===E)throw new Error("Something went wrong in type detection. Variable 'type' should not be undefined.");var k="html"===E?d:c;t=(t=t.replace(/^(<[a-zA-Z]+(?:\s[^>]*)?)(\sxmlns=["'][^"']*["'])/,"$1")).replace(/^(<([a-zA-Z]+))\b((?:[^>]*>.*?)(<\/\2>)+)/,'$1 xmlns="'+k+'"$3')}if("html"===E){for(var S=[];/<svg/.test(t);){var O=void 0;if(t=t.replace(/(<svg\b(?:[^>]*>.*?)(?:<\/svg>)+)/,function(e){return O=e,'<a id="'+m+"-"+r+'"></a>'}),null===O)throw new Error("you wanted to parse one or multiple svg-type tag-groups but something is wrong with your string. missing closing tag?");r++;var j=e(O,{type:"svg"});if(null===j||void 0===j)throw new Error("Could not parse SVG.");S.push(j)}var G=u.parseFromString(t,"text/html");return S.forEach(function(e,t){var n=G.getElementById(m+"-"+t);n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)}),G.body.firstElementChild}if("svg"===E){for(var I=[];x(t)&&!/audio|canvas|iframe|video/.test(b(t));){var T="";if(t=t.replace(/<(?=(audio|canvas|iframe|video))\1\b(?:[^>]*>.*?)(?:<\/\1>)+/,function(e){return T=e,'<a id="'+h+"-"+i+'"></a>'}),i++,null===T)throw new Error("you wanted to parse one or multiple svg-type tag-groups but something is wrong with your string. missing closing tag?");var _=e(T,{type:"html"});if(null===_||void 0===_)throw new Error("Could not parse Embedded Content.");I.push(_)}for(var A=[],L=[];y(t)&&"foreignObject"!==b(t);){var P=p(t,"foreignObject",!0),q=(t=t.substring(0,P.startIndex)+t.substring(P.endIndex)).slice(0,P.startIndex),B=t.slice(P.startIndex);t=q.concat('<a id="'+v+"-"+l+'"></a>').concat(B);var D=P.tagGroup.slice(0,P.contentStartIndex),$=P.tagGroup.slice(P.contentEndIndex);if(P.tagGroup=D.concat('<a id="'+w+"-"+l+'"></a>').concat($),A.push(e(P.tagGroup,{type:"svg"})),0!==P.content.length){var R=g(P.content);L.push(R.map(function(t){return e(t,{type:"html"})})),l++}}var F=u.parseFromString(t,"image/svg+xml");return A.forEach(function(e,t){var n=F.getElementById(v+"-"+t);n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)}),L.forEach(function(e,t){var n=F.getElementById(w+"-"+t),r=window.document.createDocumentFragment();e.forEach(function(e){return r.appendChild(e)}),n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n)}),I.forEach(function(e,t){var n=F.getElementById(h+"-"+t);n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)}),F.documentElement}}(e);r.fragment.appendChild(t)});r.refs={},r.ids={},Array.from(r.fragment.childNodes).forEach(function(e){return E(e,function(e){var t=void 0;void 0===e.dataset?null!==(t=e.getAttribute("data-ref"))&&(r.refs[t]=e):void 0!==(t=e.dataset.ref)&&(r.refs[t]=e),""!==e.id&&(r.ids[e.id]=e)})}),r.root=1===r.fragment.childNodes.length?r.fragment.firstElementChild:Array.from(r.fragment.childNodes)}return r(e,[{key:"getNode",value:function(e,t){switch(console.warn("getNode() is not finished yet."),t=Object.assign({firstMatch:!0},t),N(e)){case"id":return this.ids[e];case"class":case"query":return!0===t.firstMatch?this.fragment.querySelector(e):this.fragment.querySelectorAll(e);default:throw new Error("query is not valid.")}}},{key:"addNode",value:function(e,t){switch(console.warn("addNode() is not finished yet."),N(e)){case"Node":e.appendChild(t.fragment);break;case"id":this.ids[e].appendChild(t.fragment);break;case"class":case"query":throw new Error("class or query is not implemented.");default:throw new Error("position is not valid.")}}},{key:"removeNode",value:function(e){switch(console.warn("removeNode() is not finished yet."),N(e)){case"Node":throw new Error("removeNode() not implemented for 'Node'.");case"id":this.ids[e].parentNode.removeChild(this.ids[e]);break;case"class":throw new Error("removeNode() not implemented for class.");case"query":throw new Error("removeNode() not implemented for query.");default:throw new Error("n is not valid.")}}}]),e}());function p(e,t,n){var r,o,a="",i="",s=void 0,l=void 0,c=0,d=function(){return 0!==c},u=new RegExp("^(<"+t+"(?:[^\\/>]*)?(?:(?=((\\/)>))\\2|(?:>.*?(?=<\\/"+t+"|<"+t+"))))"),f=new RegExp("^(<\\/"+t+">(?:.*?)(?=(?:<\\/"+t+")|(?:<"+t+"))|(?:<\\/"+t+">))");r=e.match(/(.*?)(?=<foreignObject)/)[0].length,e=e.substring(r);do{var p=void 0,g=void 0;do{if(null!==(p=e.match(u))&&void 0!==p[0]){if(e=e.substring(p[0].length),a+=p[0],"/>"===p[2]){if(d())continue;return a}c+=1}}while(null!==p&&void 0!==p[0]);do{null!==(g=e.match(f))&&void 0!==g[0]&&(e=e.substring(g[0].length),a+=g[0],c-=1)}while(null!==g&&void 0!==g[0])}while(d());if(o=r+a.length,n){var m=new RegExp("^<"+t+"(?:[^\\/>]*)?(\\/)?>"),h=new RegExp("<\\/"+t+">$"),v=a.match(m),w=a.match(h);"/"===v[1]?(console.warn("A selfclosing tag has no content."),i=""):i=a.substring(v[0].length,w.index),s=v[0].length,l=w.index}return n?{tagGroup:a,startIndex:r,endIndex:o,content:i,contentStartIndex:s,contentEndIndex:l}:{tagGroup:a,startIndex:r,endIndex:o}}function g(e){for(var t=[];e.length>0;){var n=b(e);if(void 0===n)throw console.log(e),new Error("firstTagName is 'undefined'. You must have an error in your 'tagText'. Are you missing a closing tag?");var r=o(n,!1);if(void 0===r)throw new Error("createTagGroupString(firstTagName) returned 'undefined'.");t.push(r)}function o(t,n){var r="",o=0,a=function(){return 0!==o},i=new RegExp("^(<"+t+"(?:[^\\/>]*)(?:(?=((\\/)>))\\2|(?:>.*?(?=<\\/"+t+"|<"+t+"))))"),s=new RegExp("^(<\\/"+t+">(?:.*?)(?=(?:<\\/"+t+")|(?:<"+t+"))|(?:<\\/"+t+">))"),l=new RegExp("^(</"+t+"[^>]*?>)");do{var c=void 0,d=void 0;do{if(null!==(c=e.match(i))&&void 0!==c[0]){if(e=e.substring(c[0].length),r+=c[0],"/>"===c[2]&&!a())return r;o+=1}}while(null!==c&&void 0!==c[0]);do{null!==(d=1===o?e.match(l):e.match(s))&&void 0!==d[0]&&(e=e.substring(d[0].length),r+=d[0],o-=1)}while(null!==d&&void 0!==d[0])}while(a());return r}if(t.length<1)throw new Error('Could not create tag groups for "'+e+"\". See the 'tagGroups': "+t+".");return t}t.default=f;var m="nodetemplate-svg-anchor",h="nodetemplate-eb-anchor",v="nodetemplate-fo-anchor",w="nodetemplate-fo-content-anchor-";function b(e){var t=e.match(/^<([a-zA-Z\d]+)/);return null!==t?t[1]:void 0}function y(e){return/<foreignObject/.test(e)}function x(e){return/<(?=(audio|canvas|iframe|video))\1/.test(e)}var E=function(e,t){var n=0,r=function e(r){if(null!==r&&r.nodeType===Node.ELEMENT_NODE)t(r),n++,r.hasChildNodes&&e(r.firstElementChild),null!==r.nextElementSibling&&e(r.nextElementSibling);else if(0===n)throw new Error("parameter 1 is not of type 'Node'.")};return r(e),!1};function N(e){return e instanceof Node?"Node":"."===e.charAt(0)?"id":"#"===e.charAt(0)?"class":"query"}},function(e){e.exports=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"]},function(e){e.exports=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hatch","hatchpath","hkern","iframe","image","line","linearGradient","listener","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","solidcolor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"]}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9Ob2RlVGVtcGxhdGUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfTm9kZVRlbXBsYXRlMiIsIk5vZGVUZW1wbGF0ZSIsIl9Ob2RlVGVtcGxhdGUiLCJNVVRVQUxfVEFHX05BTUVTIiwiVEFHX05BTUVTX0hUTUwiLCJmaWx0ZXIiLCJ1bmRlZmluZWQiLCJUQUdfTkFNRVNfU1ZHIiwiZmluZCIsImZvckVhY2giLCJ4IiwiZm91bmQiLCJmaW5kSW5kZXgiLCJ5Iiwic3BsaWNlIiwiREVGQVVMVF9PUFRJT05TIiwiWE1MTlNfU1ZHIiwiWE1MTlNfWEhUTUwiLCJwYXJzZXIiLCJ3aW5kb3ciLCJET01QYXJzZXIiLCJkb2N1bWVudCIsImNyZWF0ZVJhbmdlIiwiV2Vha01hcCIsInRhZ1RleHQiLCJvcHRpb25zIiwiX3RoaXMiLCJ0aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiRXJyb3IiLCJhc3NpZ24iLCJzdmciLCJ0ZXh0IiwiX29wdGlvbnMyIiwicmVtb3ZlQ29tbWVudHMiLCJyZXBsYWNlQXR0cmlidXRlVmFsdWVRdW90ZXMiLCJyZXBsYWNlIiwiY2xlYW5JbnB1dFN0cmluZyIsInRhZ0dyb3VwcyIsImdldFRhZ0dyb3VwcyIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInRnIiwidGFnR3JvdXBOb2RlIiwiaGFuZGxlVGFnR3JvdXAiLCJ0YWdHcm91cCIsIlNWR0FuY2hvckluZGV4IiwiRUJBbmNob3JJbmRleCIsIkZPQW5jaG9ySW5kZXgiLCJfb3B0aW9uczMiLCJ0eXBlIiwiYWRkWE1MTlMiLCJ0YWdOYW1lIiwiZ2V0Rmlyc3RUYWdOYW1lIiwiaW5jbHVkZXMiLCJ3YXJuQWJvdXQiLCJjb25zb2xlIiwid2FybiIsInRvVXBwZXJDYXNlIiwibXV0dWFsIiwiYSIsImlzSFRNTCIsImlzU1ZHIiwiWE1MTlMiLCJTVkdOb2RlcyIsInRlc3QiLCJTVkdUZXh0IiwibWF0Y2giLCJTVkdBbmNob3JJZCIsIlNWR05vZGUiLCJwdXNoIiwiSFRNTERvY3VtZW50IiwicGFyc2VGcm9tU3RyaW5nIiwiU1ZHIiwiaWR4IiwiYW5jaG9yTm9kZSIsImdldEVsZW1lbnRCeUlkIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInJlbW92ZUNoaWxkIiwiYm9keSIsImZpcnN0RWxlbWVudENoaWxkIiwiRUJOb2RlcyIsImNvbnRhaW5zRUIiLCJFQlRleHQiLCJFQkFuY2hvcklkIiwiRUJOb2RlIiwiRk9Ob2RlcyIsIkZPQ29udGVudE5vZGVzIiwiY29udGFpbnNGTyIsImZvIiwiZ2V0VGFnR3JvdXBCeU5hbWUiLCJiZWZvcmVGTyIsInN1YnN0cmluZyIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInNsaWNlIiwiYWZ0ZXJGTyIsImNvbmNhdCIsIkZPQW5jaG9ySWQiLCJiZWZvcmVGT0NvbnRlbnQiLCJjb250ZW50U3RhcnRJbmRleCIsImFmdGVyRk9Db250ZW50IiwiY29udGVudEVuZEluZGV4IiwiRk9Db250ZW50QW5jaG9ySWQiLCJjb250ZW50IiwibGVuZ3RoIiwiRk9Db250ZW50VGV4dHMiLCJtYXAiLCJTVkdEb2N1bWVudCIsIkZPIiwiRk9Db250ZW50IiwiYXBwZW5kQ2hpbGQiLCJFQiIsImRvY3VtZW50RWxlbWVudCIsInJlZnMiLCJpZHMiLCJBcnJheSIsImZyb20iLCJjaGlsZE5vZGVzIiwiaXRlcmF0ZSIsInJlZiIsImRhdGFzZXQiLCJnZXRBdHRyaWJ1dGUiLCJpZCIsInJvb3QiLCJxdWVyeSIsImZpcnN0TWF0Y2giLCJnZXRRdWVyeVR5cGUiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsInBvc2l0aW9uIiwiZ2V0VGFnQ29udGVudCIsInVuY2xvc2VkVGFnQ250IiwidW5jbG9zZWRUYWdFeGlzdHMiLCJvcGVuaW5nVGFnUmVnZXgiLCJSZWdFeHAiLCJjbG9zaW5nVGFnUmVnZXgiLCJvcGVuaW5nVGFnTWF0Y2hlcyIsImNsb3NpbmdUYWdNYXRjaGVzIiwiZmlyc3RPcGVuaW5nVGFnUmVnZXgiLCJsYXN0Q2xvc2luZ1RhZ1JlZ2V4IiwiZmlyc3RPcGVuaW5nVGFnTWF0Y2giLCJsYXN0Q2xvc2luZ1RhZ01hdGNoIiwiaW5kZXgiLCJmaXJzdFRhZ05hbWUiLCJsb2ciLCJ0YWdHcm91cFN0cmluZyIsImNyZWF0ZVRhZ0dyb3VwU3RyaW5nIiwiZGVidWciLCJ1bmNsb3NlZFRhZ0V4aXN0IiwibWF0Y2hlcyIsImNiIiwiaXRDb3VudGVyIiwibm9kZVR5cGUiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwiaGFzQ2hpbGROb2RlcyIsIm5leHRFbGVtZW50U2libGluZyIsImNoYXJBdCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF6QixFQUFBNkIsRUFBQSxTQUFBMUIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBcUIsV0FDQSxXQUEyQixPQUFBckIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQWlCLEVBQUFDLEdBQXNELE9BQUFqQixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUF1QixFQUFBQyxJQUd0RC9CLEVBQUFrQyxFQUFBLEdBSUFsQyxJQUFBbUMsRUFBQSxtRkNsRkEsTUFBQUMsRUFBQXBDLEVBQUEsR0FDQSxJQUFNcUMsc0NBQWVDLGtCQUNORCw4VUNGZnJDLEVBQUEsUUFDQUEsRUFBQSx1REFFQSxJQUFNdUMsRUFBbUJDLFVBQWVDLE9BQU8sU0FBQVosR0FBQSxZQUEwQ2EsSUFBckNDLFVBQWNDLEtBQUssU0FBQXBDLEdBQUEsT0FBS0EsSUFBTXFCLE9BQ3ZELE1BQU8sUUFBUyxRQUFTLFVBQ25DZ0IsUUFBUSxTQUFBQyxHQUNyQixJQUFNQyxFQUFRUixFQUFpQlMsVUFBVSxTQUFBQyxHQUFBLE9BQUtILElBQU1HLElBQ3BEVixFQUFpQlcsT0FBT0gsRUFBTyxLQUduQyxJQUFNSSxLQUdBQyxFQUFZLDZCQUNaQyxFQUFjLCtCQUVkQyxFQUFTLElBQUlDLE9BQU9DLFVBZ0JMbkIsUUFmc0JLLElBQVhhLGFBQTRDYixJQUFwQmEsT0FBT0UsVUFBMEJGLE9BQU9FLFNBQVNDLFlBVy9FLElBQUlDLFFBQ1AsSUFBSUEsbUJBU3ZCLFNBQUF0QixFQUFZdUIsRUFBaUJDLEdBQWlCLElBQUFDLEVBQUFDLEtBRzFDLCtGQUgwQ0MsQ0FBQUQsS0FBQTFCLEdBR3BCLGlCQUFadUIsRUFDTixNQUFNLElBQUlLLE1BQU0seURBSXBCSixFQUFVL0MsT0FBT29ELFVBQVdmLEVBQWlCVSxJQUN2Q00sSUFHTkosS0FBS0ssS0FzSGIsU0FBMEJSLEVBQWlCQyxHQUFzQixJQUFBUSxFQUM3RFIsRUFBVS9DLE9BQU9vRCxVQUFXTCxHQUN0QlMsRUFGdURELEVBRXZEQyxlQUZ1REQsRUFFdkNFLDRCQUVuQkQsSUFRQ1YsR0FIQUEsR0FIQUEsRUFBVUEsRUFBUVksUUFBUSxnQkFBaUIsS0FHekJBLFFBQVEsb0JBQXFCLEtBRzdCQSxRQUFRLHVCQUF3QixLQTREdERaLEdBTEFBLEdBTEFBLEdBTEFBLEdBTEFBLEdBTEFBLEdBTEFBLEdBUEFBLEdBTEFBLEdBTEFBLEdBUEFBLEVBQVVBLEVBQVFZLFFBQVEsWUFBYSxLQU9yQkEsUUFBUSxVQUFXLE1BS25CQSxRQUFRLFlBQWEsU0FLckJBLFFBQVEsVUFBVyxPQU9uQkEsUUFBUSxTQUFVLE9BS2xCQSxRQUFRLGlCQUFrQixLQUsxQkEsUUFBUSxRQUFTLE1BS2pCQSxRQUFRLFFBQVMsTUFLakJBLFFBQVEsa0JBQW1CLFFBSzNCQSxRQUFRLG1DQUFvQyxRQUs1Q0EsUUFBUSxrQ0FBbUMsT0FVN0QsT0FBT1osRUF4TVNhLENBQWlCYixHQUFXVSxnQkFBZ0IsSUFDeERQLEtBQUtXLFVBQVlDLEVBQWFaLEtBQUtLLE1BSW5DTCxLQUFLYSxTQUFXckIsT0FBT0UsU0FBU29CLHlCQUNoQ2QsS0FBS1csVUFBVTdCLFFBQVEsU0FBQWlDLEdBQ25CLElBQU1DLEVBbVlsQixTQUFTQyxFQUFlQyxFQUFrQnBCLEdBQ3RDLElBQUlxQixFQUFpQixFQUNyQixJQUFJQyxFQUFnQixFQUNwQixJQUFJQyxFQUFnQixFQTBEcEJ2QixFQUFVL0MsT0FBT29ELFVBQVdMLEdBN0Q4QixJQUFBd0IsRUE4RGpDeEIsRUFBbkJ5QixFQTlEb0RELEVBOERwREMsS0FBTUMsRUE5RDhDRixFQThEOUNFLFNBSVosUUFBWTdDLElBQVQ0QyxFQUFtQixDQUNsQixJQUFJRSxFQUFVQyxFQUFnQlIsR0FLOUIsR0FIQU0sR0FBVyxFQUNYRCxPQUFPNUMsRUFFUSxRQUFaOEMsRUFDQ0YsRUFBTyxZQUNKLEdBQWUsUUFBWkUsR0FBaUMsTUFBWkEsR0FBK0Isa0JBQVpBLEVBQzlDRixFQUFPLFdBQ0osR0FBRy9DLEVBQWlCbUQsU0FBU0YsR0FBUyxLQTJDaENHLEVBQVQsU0FBbUJyRSxHQUNmc0UsUUFBUUMsS0FBUixvQkFBaUN2RSxFQUFqQyxNQUF3Q0EsRUFBeEMsK0VBQ0FzRSxRQUFRQyxLQUFSLFFBQXFCdkUsRUFBckIsTUFBNEJBLEVBQTVCLDJDQUNBc0UsUUFBUUMsS0FBUiwwREFBdUVQLEVBQUtRLGNBQTVFLEtBQ1ksU0FBVFIsR0FDQ00sUUFBUUMsS0FBUiwwR0FDQUQsUUFBUUMsS0FBUixvSkFDQUQsUUFBUUMsS0FBUixlQUNBRCxRQUFRQyxLQUFSLHlDQUF1RHZFLEVBQXZELE1BQThEQSxFQUE5RCxtQkFBbUZBLEVBQW5GLDJCQUNlLFFBQVRnRSxJQUNOTSxRQUFRQyxLQUFSLDRHQUNBRCxRQUFRQyxLQUFSLHNKQUNBRCxRQUFRQyxLQUFSLGVBQ0FELFFBQVFDLEtBQVIsMENBQXdEdkUsRUFBeEQsTUFBK0RBLEVBQS9ELG1CQUFvRkEsRUFBcEYsNkJBdkRSLE9BQU9rRSxHQUdILElBQUssU0FDTCxJQUFLLFFBQ0RELEdBQVcsRUFDWEQsRUFBTyxPQUNQLE1BRUosSUFBSyxRQUNMLElBQUssU0FDTCxJQUFLLFNBQ0wsSUFBSyxRQUNEQSxFQUFPLE9BQ1AsTUFHSixJQUFLLE9BQ0wsSUFBSyxRQUNFekIsRUFBUWtDLE9BQU9DLEVBQUVDLE9BQ2hCWCxFQUFPLFFBR1BBLEVBQU8sTUFFSEssRUFEVyxVQUFaSCxFQUNXLFFBRUEsU0FHbEIsTUFFSixJQUFLLElBQ0UzQixFQUFRa0MsT0FBT0MsRUFBRUUsTUFDaEJaLEVBQU8sT0FHUEEsRUFBTyxPQUNQSyxFQUFVLFlBb0JuQixHQUFHbkQsVUFBZWtELFNBQVNGLEdBQzlCRixFQUFPLFdBQ0osS0FBRzNDLFVBQWMrQyxTQUFTRixHQUc3QixNQUFNLElBQUl2QixNQUFKLHNDQUFnRHVCLEVBQWhELEtBRk5GLEVBQU8sWUFRQzVDLElBQWI2QyxJQUNDQSxHQUFXLEdBR2YsR0FBR0EsRUFBUyxDQUNSLFFBQVk3QyxJQUFUNEMsRUFBb0IsTUFBTSxJQUFJckIsTUFBTSxvRkFDdkMsSUFBSWtDLEVBQWtCLFNBQVRiLEVBQW1CakMsRUFBY0QsRUFHOUM2QixHQURBQSxFQUFXQSxFQUFTVCxRQUFRLG9EQUFqQixPQUNTQSxRQUFRLDRDQUFqQixhQUEyRTJCLEVBQTNFLE9BS2YsR0FBWSxTQUFUYixFQUFnQixDQUVmLElBREEsSUFBTWMsS0F1SUgsT0FBT0MsS0F0SVFwQixJQUFVLENBQ3hCLElBQUlxQixPQUFVNUQsRUFLZCxHQUpBdUMsRUFBV0EsRUFBU1QsUUFBUSxvQ0FBcUMsU0FBQStCLEdBRTdELE9BREFELEVBQVVDLEVBQ1YsVUFBaUJDLEVBQWpCLElBQWdDdEIsRUFBaEMsV0FFVyxPQUFab0IsRUFRQyxNQUFNLElBQUlyQyxNQUFNLHlIQVBoQmlCLElBQ0EsSUFBSXVCLEVBQVV6QixFQUFlc0IsR0FBV2hCLEtBQU0sUUFDOUMsR0FBZ0IsT0FBWm1CLFFBQWdDL0QsSUFBWitELEVBQ3BCLE1BQU0sSUFBSXhDLE1BQU0sd0JBRXBCbUMsRUFBU00sS0FBS0QsR0FLdEIsSUFBTUUsRUFBZXJELEVBQU9zRCxnQkFBZ0IzQixFQUFVLGFBUXRELE9BUEFtQixFQUFTdkQsUUFBUSxTQUFDZ0UsRUFBS0MsR0FDbkIsSUFBTUMsRUFBYUosRUFBYUssZUFBa0JSLEVBQS9CLElBQThDTSxHQUNqRUMsRUFBV0UsV0FBV0MsYUFBYUwsRUFBS0UsR0FDeENBLEVBQVdFLFdBQVdFLFlBQVlKLEtBSS9CSixFQUFhUyxLQUFLQyxrQkFFeEIsR0FBWSxRQUFUL0IsRUFBZSxDQUVuQixJQURBLElBQU1nQyxLQUNBQyxFQUFXdEMsS0FBYyw0QkFBNEJvQixLQUFLWixFQUFnQlIsS0FBVyxDQUN2RixJQUFJdUMsRUFBUyxHQU1iLEdBTEF2QyxFQUFXQSxFQUFTVCxRQUFRLCtEQUFnRSxTQUFBK0IsR0FFeEYsT0FEQWlCLEVBQVNqQixFQUNULFVBQWlCa0IsRUFBakIsSUFBK0J0QyxFQUEvQixXQUVKQSxJQUNjLE9BQVhxQyxFQU9DLE1BQU0sSUFBSXZELE1BQU0seUhBTmhCLElBQUl5RCxFQUFTMUMsRUFBZXdDLEdBQVVsQyxLQUFNLFNBQzVDLEdBQWUsT0FBWG9DLFFBQThCaEYsSUFBWGdGLEVBQ25CLE1BQU0sSUFBSXpELE1BQU0scUNBRXBCcUQsRUFBUVosS0FBS2dCLEdBUXJCLElBRkEsSUFBTUMsS0FDQUMsS0FDQUMsRUFBVzVDLElBQTJDLGtCQUE5QlEsRUFBZ0JSLElBQThCLENBcUJ4RSxJQUFJNkMsRUFBS0MsRUFBa0I5QyxFQUFVLGlCQUFpQixHQU1oRCtDLEdBRk4vQyxFQUFXQSxFQUFTZ0QsVUFBVSxFQUFHSCxFQUFHSSxZQUFjakQsRUFBU2dELFVBQVVILEVBQUdLLFdBRTlDQyxNQUFNLEVBQUdOLEVBQUdJLFlBQ2hDRyxFQUFVcEQsRUFBU21ELE1BQU1OLEVBQUdJLFlBQ2xDakQsRUFBVytDLEVBQVNNLE9BQVQsVUFBMEJDLEVBQTFCLElBQXdDbkQsRUFBeEMsVUFBK0RrRCxPQUFPRCxHQUlqRixJQUFNRyxFQUFrQlYsRUFBRzdDLFNBQVNtRCxNQUFNLEVBQUdOLEVBQUdXLG1CQUMxQ0MsRUFBaUJaLEVBQUc3QyxTQUFTbUQsTUFBTU4sRUFBR2EsaUJBTTVDLEdBTEFiLEVBQUc3QyxTQUFXdUQsRUFBZ0JGLE9BQWhCLFVBQWlDTSxFQUFqQyxJQUFzRHhELEVBQXRELFVBQTZFa0QsT0FBT0ksR0FFbEdmLEVBQVFqQixLQUFLMUIsRUFBZThDLEVBQUc3QyxVQUFZSyxLQUFNLFNBR3hCLElBQXRCd0MsRUFBR2UsUUFBUUMsT0FBYSxDQUV2QixJQUFNQyxFQUFpQnBFLEVBQWFtRCxFQUFHZSxTQUN2Q2pCLEVBQWVsQixLQUFLcUMsRUFBZUMsSUFBSSxTQUFBbEUsR0FBQSxPQUFNRSxFQUFlRixHQUFNUSxLQUFNLFlBQ3hFRixLQU1SLElBQU02RCxFQUFjM0YsRUFBT3NELGdCQUFnQjNCLEVBQVUsaUJBd0JyRCxPQXJCQTBDLEVBQVE5RSxRQUFRLFNBQUNxRyxFQUFJcEMsR0FDakIsSUFBTUMsRUFBYWtDLEVBQVlqQyxlQUFrQnVCLEVBQTlCLElBQTRDekIsR0FDL0RDLEVBQVdFLFdBQVdDLGFBQWFnQyxFQUFJbkMsR0FDdkNBLEVBQVdFLFdBQVdFLFlBQVlKLEtBR3RDYSxFQUFlL0UsUUFBUSxTQUFDc0csRUFBV3JDLEdBQy9CLElBQU1DLEVBQWFrQyxFQUFZakMsZUFBa0I0QixFQUE5QixJQUFtRDlCLEdBQ2hFbEMsRUFBV3JCLE9BQU9FLFNBQVNvQix5QkFDakNzRSxFQUFVdEcsUUFBUSxTQUFBQyxHQUFBLE9BQUs4QixFQUFTd0UsWUFBWXRHLEtBQzVDaUUsRUFBV0UsV0FBV0MsYUFBYXRDLEVBQVVtQyxHQUM3Q0EsRUFBV0UsV0FBV0UsWUFBWUosS0FHdENPLEVBQVF6RSxRQUFRLFNBQUN3RyxFQUFJdkMsR0FDakIsSUFBTUMsRUFBYWtDLEVBQVlqQyxlQUFrQlMsRUFBOUIsSUFBNENYLEdBQy9EQyxFQUFXRSxXQUFXQyxhQUFhbUMsRUFBSXRDLEdBQ3ZDQSxFQUFXRSxXQUFXRSxZQUFZSixLQUkvQmtDLEVBQVlLLGlCQWhxQk10RSxDQUFlRixHQUVwQ2hCLEVBQUtjLFNBQVN3RSxZQUFZckUsS0FPMUJqQixFQUFLeUYsUUFDTHpGLEVBQUswRixPQUNMQyxNQUFNQyxLQUFLNUYsRUFBS2MsU0FBUytFLFlBQVk5RyxRQUFRLFNBQUFvQyxHQUFBLE9BQVkyRSxFQUFRM0UsRUFBVSxTQUFBcEQsR0FFdkUsSUFBSWdJLE9BQU1uSCxPQUNPQSxJQUFkYixFQUFFaUksUUFFVSxRQURYRCxFQUFNaEksRUFBRWtJLGFBQWEsZUFFakJqRyxFQUFLeUYsS0FBS00sR0FBT2hJLFFBSVZhLEtBRFhtSCxFQUFNaEksRUFBRWlJLFFBQVFELE9BRVovRixFQUFLeUYsS0FBS00sR0FBT2hJLEdBSVosS0FBVEEsRUFBRW1JLEtBQ0ZsRyxFQUFLMEYsSUFBSTNILEVBQUVtSSxJQUFNbkksT0FLekJpQyxFQUFLbUcsS0FBNEMsSUFBcENuRyxFQUFLYyxTQUFTK0UsV0FBV2IsT0FDaENoRixFQUFLYyxTQUFTeUMsa0JBQ2RvQyxNQUFNQyxLQUFLNUYsRUFBS2MsU0FBUytFLHNEQVUvQk8sRUFBZXJHLEdBR25CLE9BRkErQixRQUFRQyxLQUFLLGtDQUNiaEMsRUFBVS9DLE9BQU9vRCxRQUFTaUcsWUFBWSxHQUFRdEcsR0FDdkN1RyxFQUFhRixJQUNoQixJQUFLLEtBQ0QsT0FBT25HLEtBQUt5RixJQUFJVSxHQUNwQixJQUFLLFFBQ0wsSUFBSyxRQUNELE9BQThCLElBQXZCckcsRUFBUXNHLFdBQ1RwRyxLQUFLYSxTQUFTeUYsY0FBY0gsR0FDNUJuRyxLQUFLYSxTQUFTMEYsaUJBQWlCSixHQUN6QyxRQUNJLE1BQU0sSUFBSWpHLE1BQU0sd0RBWXBCc0csRUFBeUIxSSxHQUU3QixPQURBK0QsUUFBUUMsS0FBSyxrQ0FDTnVFLEVBQWFHLElBQ2hCLElBQUssT0FDREEsRUFBU25CLFlBQVl2SCxFQUFFK0MsVUFDdkIsTUFDSixJQUFLLEtBQ2NiLEtBQUt5RixJQUFJZSxHQUNqQm5CLFlBQVl2SCxFQUFFK0MsVUFDckIsTUFDSixJQUFLLFFBQ0wsSUFBSyxRQUNELE1BQU0sSUFBSVgsTUFBTSxzQ0FDcEIsUUFDSSxNQUFNLElBQUlBLE1BQU0sOERBT2pCcEMsR0FFUCxPQURBK0QsUUFBUUMsS0FBSyxxQ0FDTnVFLEVBQWF2SSxJQUNoQixJQUFLLE9BQ0QsTUFBTSxJQUFJb0MsTUFBTSw0Q0FDcEIsSUFBSyxLQUNERixLQUFLeUYsSUFBSTNILEdBQUdvRixXQUFXRSxZQUFZcEQsS0FBS3lGLElBQUkzSCxJQUM1QyxNQUNKLElBQUssUUFDRCxNQUFNLElBQUlvQyxNQUFNLDJDQUNwQixJQUFLLFFBQ0QsTUFBTSxJQUFJQSxNQUFNLDJDQUNwQixRQUNJLE1BQU0sSUFBSUEsTUFBTSw4QkFtSGhDLFNBQVM4RCxFQUFrQjNELEVBQWNvQixFQUFpQmdGLEdBS2xELElBRUl0QyxFQUNBQyxFQUhBbEQsRUFBVyxHQUNYNEQsRUFBVSxHQUdWSixPQUFvQi9GLEVBQ3BCaUcsT0FBa0JqRyxFQUVsQitILEVBQWlCLEVBQ2ZDLEVBQW9CLGtCQUF5QixJQUFuQkQsR0FFMUJFLEVBQWtCLElBQUlDLE9BQUosTUFBaUJwRixFQUFqQixpREFBeUVBLEVBQXpFLEtBQXFGQSxFQUFyRixRQUNsQnFGLEVBQWtCLElBQUlELE9BQUosU0FBb0JwRixFQUFwQixxQkFBZ0RBLEVBQWhELFNBQWdFQSxFQUFoRSxhQUFvRkEsRUFBcEYsT0FJeEIwQyxFQUR3QjlELEVBQUttQyxNQUFNLDJCQUNOLEdBQUd1QyxPQUNoQzFFLEVBQU9BLEVBQUs2RCxVQUFVQyxHQUl0QixFQUFHLENBQ0MsSUFBSTRDLE9BQW9CcEksRUFDcEJxSSxPQUFvQnJJLEVBRXhCLEdBR0ksR0FBeUIsUUFGekJvSSxFQUFvQjFHLEVBQUttQyxNQUFNb0UsVUFFMkJqSSxJQUF6Qm9JLEVBQWtCLEdBQWlCLENBSWhFLEdBSEExRyxFQUFPQSxFQUFLNkQsVUFBVTZDLEVBQWtCLEdBQUdoQyxRQUMzQzdELEdBQVk2RixFQUFrQixHQUVGLE9BQXpCQSxFQUFrQixHQUFZLENBQzdCLEdBQUlKLElBR0EsU0FGQSxPQUFPekYsRUFLWHdGLEdBQWtCLFNBR0EsT0FBdEJLLFFBQXVEcEksSUFBekJvSSxFQUFrQixJQUV4RCxHQUU2QixRQUR6QkMsRUFBb0IzRyxFQUFLbUMsTUFBTXNFLFVBQzJCbkksSUFBekJxSSxFQUFrQixLQUMvQzNHLEVBQU9BLEVBQUs2RCxVQUFVOEMsRUFBa0IsR0FBR2pDLFFBQzNDN0QsR0FBWThGLEVBQWtCLEdBQzlCTixHQUFrQixTQUVJLE9BQXRCTSxRQUF1RHJJLElBQXpCcUksRUFBa0IsVUFDcERMLEtBU1IsR0FMQXZDLEVBQVdELEVBQWFqRCxFQUFTNkQsT0FLOUIwQixFQUFjLENBQ2IsSUFBTVEsRUFBdUIsSUFBSUosT0FBSixLQUFnQnBGLEVBQWhCLHdCQUN2QnlGLEVBQXNCLElBQUlMLE9BQUosT0FBa0JwRixFQUFsQixNQUN0QjBGLEVBQXVCakcsRUFBU3NCLE1BQU15RSxHQUN0Q0csRUFBc0JsRyxFQUFTc0IsTUFBTTBFLEdBRVosTUFBNUJDLEVBQXFCLElBQ3BCdEYsUUFBUUMsS0FBSyxxQ0FDYmdELEVBQVUsSUFFVkEsRUFBVTVELEVBQVNnRCxVQUFVaUQsRUFBcUIsR0FBR3BDLE9BQVFxQyxFQUFvQkMsT0FFckYzQyxFQUFvQnlDLEVBQXFCLEdBQUdwQyxPQUM1Q0gsRUFBa0J3QyxFQUFvQkMsTUFHMUMsT0FBR1osR0FDU3ZGLFdBQVVpRCxhQUFZQyxXQUFVVSxVQUFTSixvQkFBbUJFLG9CQUU1RDFELFdBQVVpRCxhQUFZQyxZQUcxQyxTQUFTeEQsRUFBYWYsR0FLbEIsSUFIQSxJQUFNYyxLQUdBZCxFQUFRa0YsT0FBUyxHQUFFLENBQ3JCLElBQU11QyxFQUFlNUYsRUFBZ0I3QixHQUNyQyxRQUFvQmxCLElBQWpCMkksRUFTQyxNQURBekYsUUFBUTBGLElBQUkxSCxHQUNOLElBQUlLLE1BQU0seUdBUmhCLElBQUlzSCxFQUFpQkMsRUFBcUJILEdBQWMsR0FDeEQsUUFBc0IzSSxJQUFuQjZJLEVBR0MsTUFBTSxJQUFJdEgsTUFBTSw0REFGaEJTLEVBQVVnQyxLQUFLNkUsR0FXM0IsU0FBU0MsRUFBcUJILEVBQXNCSSxHQUVoRCxJQUFJRixFQUFpQixHQUVqQmQsRUFBaUIsRUFDZmlCLEVBQW1CLGtCQUF5QixJQUFuQmpCLEdBRXpCRSxFQUFrQixJQUFJQyxPQUFKLE1BQWlCUyxFQUFqQixnREFBNkVBLEVBQTdFLEtBQThGQSxFQUE5RixRQUNsQlIsRUFBa0IsSUFBSUQsT0FBSixTQUFvQlMsRUFBcEIscUJBQXFEQSxFQUFyRCxTQUEwRUEsRUFBMUUsYUFBbUdBLEVBQW5HLE9BQ2xCSixFQUFzQixJQUFJTCxPQUFKLE9BQW1CUyxFQUFuQixZQUU1QixFQUFHLENBQ0MsSUFBSVAsT0FBb0JwSSxFQUNwQnFJLE9BQW9CckksRUFHeEIsR0FFSSxHQUF5QixRQUR6Qm9JLEVBQW9CbEgsRUFBUTJDLE1BQU1vRSxVQUN3QmpJLElBQXpCb0ksRUFBa0IsR0FBaUIsQ0FJaEUsR0FIQWxILEVBQVVBLEVBQVFxRSxVQUFVNkMsRUFBa0IsR0FBR2hDLFFBQ2pEeUMsR0FBa0JULEVBQWtCLEdBRVIsT0FBekJBLEVBQWtCLEtBQWdCWSxJQUNqQyxPQUFPSCxFQUVQZCxHQUFrQixTQUdBLE9BQXRCSyxRQUF1RHBJLElBQXpCb0ksRUFBa0IsSUFHeEQsR0FLNkIsUUFIekJDLEVBQXdDLElBQW5CTixFQUNmN0csRUFBUTJDLE1BQU0wRSxHQUNkckgsRUFBUTJDLE1BQU1zRSxVQUNzQ25JLElBQXpCcUksRUFBa0IsS0FDL0NuSCxFQUFVQSxFQUFRcUUsVUFBVThDLEVBQWtCLEdBQUdqQyxRQUNqRHlDLEdBQWtCUixFQUFrQixHQUNwQ04sR0FBa0IsU0FFSSxPQUF0Qk0sUUFBdURySSxJQUF6QnFJLEVBQWtCLFVBRXBEVyxLQUVSLE9BQU9ILEVBSVgsR0FBRzdHLEVBQVVvRSxPQUFTLEVBQ2xCLE1BQU0sSUFBSTdFLE1BQUosb0NBQThDTCxFQUE5Qyw0QkFBZ0ZjLEVBQWhGLEtBRU4sT0FBT0EsWUFsWk1yQyxFQXdackIsSUFBTW1FLDRCQUNBaUIsMkJBQ0FjLDJCQUNBSyxvQ0FtU04sU0FBU25ELEVBQWdCN0IsR0FFckIsSUFBSStILEVBQVUvSCxFQUFRMkMsTUFBTSxtQkFDNUIsT0FBb0IsT0FBWm9GLEVBQW9CQSxFQUFRLFFBQUtqSixFQUs3QyxTQUFTbUYsRUFBV2pFLEdBQ2hCLE1BQU8saUJBQWlCeUMsS0FBS3pDLEdBRWpDLFNBQVMyRCxFQUFXM0QsR0FDaEIsTUFBTyxxQ0FBcUN5QyxLQUFLekMsR0FRckQsSUFBTWdHLEVBQVUsU0FBQy9ILEVBQVMrSixHQUN0QixJQUFJQyxFQUFZLEVBQ1ZqQyxFQUFVLFNBQVZBLEVBQVcvSCxHQUNiLEdBQVUsT0FBTkEsR0FBY0EsRUFBRWlLLFdBQWFDLEtBQUtDLGFBRWxDSixFQUFHL0osR0FDSGdLLElBRUloSyxFQUFFb0ssZUFDRnJDLEVBQVEvSCxFQUFFd0YsbUJBRWUsT0FBekJ4RixFQUFFcUssb0JBQ0Z0QyxFQUFRL0gsRUFBRXFLLHlCQUVYLEdBQWtCLElBQWRMLEVBQ1AsTUFBTSxJQUFJNUgsTUFBTSx1Q0FNeEIsT0FGQTJGLEVBQVEvSCxJQUVELEdBS1gsU0FBU3VJLEVBQWFGLEdBQ2xCLE9BQVFBLGFBQWlCNkIsS0FBTyxPQUNKLE1BQXBCN0IsRUFBTWlDLE9BQU8sR0FBYSxLQUNOLE1BQXBCakMsRUFBTWlDLE9BQU8sR0FBYSxRQUFVIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBfTm9kZVRlbXBsYXRlIGZyb20gXCIuL05vZGVUZW1wbGF0ZVwiXG5jb25zdCBOb2RlVGVtcGxhdGUgPSBfTm9kZVRlbXBsYXRlXG5leHBvcnQgZGVmYXVsdCBOb2RlVGVtcGxhdGUiLCJpbXBvcnQgVEFHX05BTUVTX0hUTUwgZnJvbSBcImh0bWwtdGFnLW5hbWVzXCJcbmltcG9ydCBUQUdfTkFNRVNfU1ZHIGZyb20gXCJzdmctdGFnLW5hbWVzXCJcblxuY29uc3QgTVVUVUFMX1RBR19OQU1FUyA9IFRBR19OQU1FU19IVE1MLmZpbHRlcihuID0+IFRBR19OQU1FU19TVkcuZmluZChtID0+IG0gPT09IG4pICE9PSB1bmRlZmluZWQpXG5jb25zdCBWQUxVRVNfVE9fUkVNT1ZFID0gWyBcInN2Z1wiLCBcImltYWdlXCIsIFwic3R5bGVcIiwgXCJzY3JpcHRcIiBdXG5WQUxVRVNfVE9fUkVNT1ZFLmZvckVhY2goeCA9PiB7XG4gICAgY29uc3QgZm91bmQgPSBNVVRVQUxfVEFHX05BTUVTLmZpbmRJbmRleCh5ID0+IHggPT09IHkpXG4gICAgTVVUVUFMX1RBR19OQU1FUy5zcGxpY2UoZm91bmQsIDEpXG59KVxuXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG59XG5cbmNvbnN0IFhNTE5TX1NWRyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuY29uc3QgWE1MTlNfWEhUTUwgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuXG5jb25zdCBwYXJzZXIgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpXG5jb25zdCBjcmVhdGVEb2N1bWVudEZyYWdtZW50ID0gKHdpbmRvdyAhPT0gdW5kZWZpbmVkICYmIHdpbmRvdy5kb2N1bWVudCAhPT0gdW5kZWZpbmVkICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVSYW5nZSAhPT0gdW5kZWZpbmVkKVxuICAgID8gKHRhZ1RleHQ6IFN0cmluZykgPT4gd2luZG93LmRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHRhZ1RleHQpXG4gICAgOiAodGFnVGV4dDogU3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyB3aW5kb3cuRE9NUGFyc2VyKClcbiAgICAgICAgY29uc3QgX19kb2N1bWVudF9fID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0YWdUZXh0LCBcInRleHQvaHRtbFwiKVxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgQXJyYXkuZnJvbShfX2RvY3VtZW50X18uYm9keS5jaGlsZE5vZGVzKS5mb3JFYWNoKG4gPT4gZnJhZ21lbnQuYXBwZW5kQ2hpbGQobikpXG4gICAgICAgIHJldHVybiBmcmFnbWVudFxufVxuXG5jb25zdCB0aGF0ID0ge1xuICAgIGhhc011bHRpcGxlVGFnR3JvdXBzOiBuZXcgV2Vha01hcCgpLFxuICAgIGhhc1NpbmdsZVRhZ0dyb3VwOiBuZXcgV2Vha01hcCgpLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlVGVtcGxhdGUge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfVxuICAgICAqIEBwYXJhbSB7YW55fVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRhZ1RleHQ6IFN0cmluZywgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBwYXJhbWV0ZXIgdHlwZWNoZWNrc1xuICAgICAgICBpZih0eXBlb2YgdGFnVGV4dCAhPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ5b3UgbmVlZCB0byBwcm92aWRlIGEgeG1sIHN0cmluZyBhcyBmaXJzdCBwYXJhbWV0ZXIuXCIpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBtZXJnZSBkZWZhdWx0IG9wdGlvbnNcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUywgb3B0aW9ucylcbiAgICAgICAgbGV0IHsgc3ZnIH0gPSBvcHRpb25zXG4gICAgICAgIFxuICAgICAgICAvLyBwcmVwYXJlIGlucHV0IHN0cmluZ1xuICAgICAgICB0aGlzLnRleHQgPSBjbGVhbklucHV0U3RyaW5nKHRhZ1RleHQsIHsgcmVtb3ZlQ29tbWVudHM6IHRydWUgfSlcbiAgICAgICAgdGhpcy50YWdHcm91cHMgPSBnZXRUYWdHcm91cHModGhpcy50ZXh0KVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRhZ0dyb3VwczpcIiwgdGhpcy50YWdHcm91cHMpXG5cbiAgICAgICAgLy8gcGFyc2VcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgdGhpcy50YWdHcm91cHMuZm9yRWFjaCh0ZyA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YWdHcm91cE5vZGUgPSBoYW5kbGVUYWdHcm91cCh0ZylcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYWRkaW5nIHRhZ0dyb3VwIHRvIHRoZSBmcmFnbWVudDpcIiwgdGFnR3JvdXBOb2RlKVxuICAgICAgICAgICAgdGhpcy5mcmFnbWVudC5hcHBlbmRDaGlsZCh0YWdHcm91cE5vZGUpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgZnJhZ21lbnQ6XCIsIHRoaXMuZnJhZ21lbnQpXG4gICAgXG4gICAgICAgIC8vIGNyZWF0ZSBub2RlIHJlZmVyZW5jZXNcbiAgICAgICAgY29uc3QgY3JlYXRlUmVmZXJlbmNlcyA9ICgoKSA9PiB7XG4gICAgICAgICAgICAvLyBhZGQgZWxlbWVudCByZWZlcmVuY2VzIGZyb20gJ2RhdGEtdHJlZicgYW5kICdpZCcgYXR0cmlidXRlc1xuICAgICAgICAgICAgdGhpcy5yZWZzID0ge31cbiAgICAgICAgICAgIHRoaXMuaWRzID0ge31cbiAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5mcmFnbWVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKHRhZ0dyb3VwID0+IGl0ZXJhdGUodGFnR3JvdXAsIG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBkYXRhLXJlZiByZWZlcmVuY2VzXG4gICAgICAgICAgICAgICAgbGV0IHJlZiA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIGlmKG4uZGF0YXNldCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgcmVmID0gbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJlZlwiKVxuICAgICAgICAgICAgICAgICAgICBpZihyZWYgIT09IG51bGwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZzW3JlZl0gPSBuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWYgPSBuLmRhdGFzZXQucmVmXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmc1tyZWZdID0gblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGFkZCBub2RlIGlkIHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICBpZiAobi5pZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkc1tuLmlkXSA9IG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSlcblxuICAgICAgICAgICAgLy8gYWRkIHJvb3QgcmVmZXJlbmNlXG4gICAgICAgICAgICB0aGlzLnJvb3QgPSAodGhpcy5mcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICA/IHRoaXMuZnJhZ21lbnQuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICAgICAgICAgICAgICA6IEFycmF5LmZyb20odGhpcy5mcmFnbWVudC5jaGlsZE5vZGVzKVxuICAgICAgICB9KSgpXG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFib3V0ICdET01TdHJpbmdzJyBmb3IgcXVlcnlzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRE9NU3RyaW5nXG4gICAgICovXG4gICAgLyoqXG4gICAgICogVGhlIG1ldGhvZCByZXR1cm5zIGEgJ05vZGUnIG9mIHRoZSAnTm9kZVRlbXBsYXRlLidcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnk6IENhbiBiZSAuY2xhc3MsICNpZCBvciAnRE9NU3RyaW5nJy4gXG4gICAgICovXG4gICAgZ2V0Tm9kZShxdWVyeTogU3RyaW5nLCBvcHRpb25zOiBhbnkpe1xuICAgICAgICBjb25zb2xlLndhcm4oXCJnZXROb2RlKCkgaXMgbm90IGZpbmlzaGVkIHlldC5cIilcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBmaXJzdE1hdGNoOiB0cnVlIH0sIG9wdGlvbnMpXG4gICAgICAgIHN3aXRjaChnZXRRdWVyeVR5cGUocXVlcnkpKXtcbiAgICAgICAgICAgIGNhc2UgXCJpZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlkc1txdWVyeV1cbiAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgY2FzZSBcInF1ZXJ5XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZmlyc3RNYXRjaCA9PT0gdHJ1ZSBcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmZyYWdtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5mcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KVxuICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicXVlcnkgaXMgbm90IHZhbGlkLlwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgY29tYmluZXMgJ05vZGVUZW1wbGF0ZXMnXG4gICAgICogLSBhZGQgbi5pZHMgdG8gdGhpcy5pZHMgWyBdXG4gICAgICogLSBhZGQgbi5yZWZzIHRvIHRoaXMucmVmcyBbIF1cbiAgICAgKiAtIHVwZGF0ZSB0YWdUZXh0IG9yIHJlbW92ZSB0YWdUZXh0PyBbIF1cbiAgICAgKiAtIHZhbGlkYXRlIGFkZGVkIGlkcyBhbmQgcmVmcy4gWyBdXG4gICAgICogQHBhcmFtIHtOb2RlIHwgU3RyaW5nfSBwb3NpdGlvbiBpcyBhICdOb2RlJyBvciBhICdTdHJpbmcnXG4gICAgICogQHBhcmFtIHtOb2RlVGVtcGxhdGV9IG4gaXMgYW5vdGhlciAnTm9kZVRlbXBsYXRlJy5cbiAgICAgKi9cbiAgICBhZGROb2RlKHBvc2l0aW9uOiBOb2RlIHwgU3RyaW5nLCBuOiBOb2RlVGVtcGxhdGUpe1xuICAgICAgICBjb25zb2xlLndhcm4oXCJhZGROb2RlKCkgaXMgbm90IGZpbmlzaGVkIHlldC5cIilcbiAgICAgICAgc3dpdGNoKGdldFF1ZXJ5VHlwZShwb3NpdGlvbikpe1xuICAgICAgICAgICAgY2FzZSBcIk5vZGVcIjpcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi5hcHBlbmRDaGlsZChuLmZyYWdtZW50KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiaWRcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmlkc1twb3NpdGlvbl1cbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobi5mcmFnbWVudClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICBjYXNlIFwicXVlcnlcIjpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjbGFzcyBvciBxdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQuXCIpXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInBvc2l0aW9uIGlzIG5vdCB2YWxpZC5cIilcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge05vZGUgfCBTdHJpbmd9IG4gXG4gICAgICovXG4gICAgcmVtb3ZlTm9kZShuOiBOb2RlIHwgU3RyaW5nKXtcbiAgICAgICAgY29uc29sZS53YXJuKFwicmVtb3ZlTm9kZSgpIGlzIG5vdCBmaW5pc2hlZCB5ZXQuXCIpXG4gICAgICAgIHN3aXRjaChnZXRRdWVyeVR5cGUobikpe1xuICAgICAgICAgICAgY2FzZSBcIk5vZGVcIjpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZW1vdmVOb2RlKCkgbm90IGltcGxlbWVudGVkIGZvciAnTm9kZScuXCIpXG4gICAgICAgICAgICBjYXNlIFwiaWRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmlkc1tuXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaWRzW25dKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZW1vdmVOb2RlKCkgbm90IGltcGxlbWVudGVkIGZvciBjbGFzcy5cIilcbiAgICAgICAgICAgIGNhc2UgXCJxdWVyeVwiOlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlbW92ZU5vZGUoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHF1ZXJ5LlwiKVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJuIGlzIG5vdCB2YWxpZC5cIilcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIEB0b2RvOiBmaXggcGFyZW50aGVzaXMgc3BhY2VzXG4vLyBAZmVhdHVyZTogcmVwbGFjZSBcIlwiIGluIGF0dHJpYnV0ZS12YWx1ZXMgKGNzcylcbmZ1bmN0aW9uIGNsZWFuSW5wdXRTdHJpbmcodGFnVGV4dDogU3RyaW5nLCBvcHRpb25zOiBhbnkpOiBTdHJpbmcge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKVxuICAgIGxldCB7IHJlbW92ZUNvbW1lbnRzLCByZXBsYWNlQXR0cmlidXRlVmFsdWVRdW90ZXMgfSA9IG9wdGlvbnNcbiAgICBcbiAgICBpZihyZW1vdmVDb21tZW50cyl7XG4gICAgICAgIC8vIHJlbW92ZSBqcyBsaW5lIGNvbW1lbnRzLlxuICAgICAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC9cXHMqXFwvXFwvLio/JC9nbSwgXCJcIilcbiAgICAgICAgLy8gcmVtb3ZlIGpzIG11bHRpIGxpbmUgY29tbWVudHMuXG4gICAgICAgIC8vIEB3YXJuaW5nOiBkb2VzIG5vdCB3b3JrIG5lc3RlZCAhIVxuICAgICAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC9cXC9cXCp7MSx9W15dKj9cXCpcXC8vLCBcIlwiKVxuICAgICAgICAvLyByZW1vdmUgaHRtbCBjb21tZW50cy5cbiAgICAgICAgLy8gQHdhcm5pbmc6IGRvZXMgbm90IHdvcmsgbmVzdGVkICEhXG4gICAgICAgIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoL1xcPFxcIVxcLVxcLVteXSo/XFwtXFwtXFw+L2csIFwiXCIpXG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGFsbCBuZXdsaW5lcywgdGFicyBhbmQgcmV0dXJucyBmcm9tIHRoZSB0YWdUZXh0IHN0cmluZyB0byBjcmVhdGUgb25lIGxpbmVcbiAgICAvLyByZWdleDogW1xcblxcdFxccl1cbiAgICAvLyBzdWJzdDogbnVsbFxuICAgIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoL1tcXG5cXHRcXHJdL2csIFwiXCIpXG5cbiAgICAvLyBzdHlsZSBtdWx0aWxpbmUgc3BlY2lmaWM6XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gcmVtb3ZlIGFsbCBzcGFjZXMgPiAyIFxuICAgIC8vIHJlZ2V4OiBcXHN7Mix9XG4gICAgLy8gc3Vic3Q6IG51bGxcbiAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKVxuICAgIFxuICAgIC8vIGFkZCBzcGFjZSBhZnRlciBldmVyeSA7IGluIHN0eWxlIGF0dHJpYnV0ZXNcbiAgICAvLyByZWdleDogOyhbXlxcc10pXG4gICAgLy8gc3Vic3Q6IDsgJDFcbiAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC87KFteXFxzXSkvZywgXCI7ICQxXCIpXG4gICAgXG4gICAgLy8gcmVtb3ZlIHNwYWNlIGJlZm9yZSBcIj4gY2xvc2UgY29tYmluYXRpb25cbiAgICAvLyByZWdleDogXFxzKFwiPilcbiAgICAvLyBzdWJzdDogJDFcbiAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC9cXHMoXCI+KS9nLCBcIiQxXCIpICAgIFxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbiAgICAvLyByZW1vdmUgYWxsIHdoaXRlc3BhY2UgYmV0d2VlbiB0YWdzIGJ1dCBub3QgaW5zaWRlIG9mIHRhZ3NcbiAgICAvLyByZWdleDogPlxccyo8XG4gICAgLy8gc3Vic3Q6ID48XG4gICAgdGFnVGV4dCA9IHRhZ1RleHQucmVwbGFjZSgvPlxccyo8L2csIFwiPjxcIilcblxuICAgIC8vIHJlbW92ZSBhbGwgd2hpdGVzcGFjZSBiZWZvcmUgdGhlIGZpcnN0IHRhZyBvciBhZnRlciB0aGUgbGFzdCB0YWdcbiAgICAvLyByZWdleDogXihcXHMqKXwoXFxzKikkXG4gICAgLy8gc3Vic3Q6IG51bGxcbiAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC9eKFxccyopfChcXHMqKSQvZywgXCJcIilcblxuICAgIC8vIHJlbW92ZSBzcGFjZXMgYmVmb3JlIHRhZ1RleHQgbm9kZXNcbiAgICAvLyByZWdleDogPlxccypcbiAgICAvLyBzdWJzdDogPlxuICAgIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoLz5cXHMqL2csIFwiPlwiKVxuICAgIFxuICAgIC8vIHJlbW92ZSBzcGFjZXMgYWZ0ZXIgdGFnVGV4dCBub2Rlc1xuICAgIC8vIHJlZ2V4OiBcXHMqPFxuICAgIC8vIHN1YnN0OiA8XG4gICAgdGFnVGV4dCA9IHRhZ1RleHQucmVwbGFjZSgvXFxzKjwvZywgXCI8XCIpXG5cbiAgICAvLyByZW1vdmUgc3BhY2UgYmV0d2VlbiBvcGVuaW5nIHRhZyBhbmQgZmlyc3QgYXR0cmlidXRlXG4gICAgLy8gcmVnZXg6ICg8XFx3KikoXFxzezIsfSlcbiAgICAvLyBzdWJzdDogJDFcXHNcbiAgICB0YWdUZXh0ID0gdGFnVGV4dC5yZXBsYWNlKC8oPFxcdyspKFxcc3syLH0pL2csIFwiJDEgXCIpXG5cbiAgICAvLyByZW1vdmUgc3BhY2UgYmV0d2VlbiBhdHRyaWJ1dGVzICh0cmFpbGluZyBzcGFjZSlcbiAgICAvLyByZWdleDogKFtcXHctX10rPVwiW1xcd1xccy1fXStcIikoXFxzKig/IT4pKVxuICAgIC8vIHN1YnN0OiAkMVxcc1xuICAgIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoLyhbXFx3LV9dKz1cIltcXHdcXHMtX10rXCIpKFxccyooPyE+KSkvZywgXCIkMSBcIilcblxuICAgIC8vIHJlbW92ZSBzcGFjZSBiZXR3ZWVuIGxhc3QgYXR0cmlidXRlIGFuZCBjbG9zaW5nIHRhZ1xuICAgIC8vIHJlZ2V4OiAoXFx3Kz1cIlxcdytcIikoXFxzKyk+XG4gICAgLy8gc3Vic3Q6ICQxPlxuICAgIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoLyhbXFx3LV9dKz1cIltcXHdcXHMtX10rXCIpKFxcc3syLH0pPi9nLCBcIiQxPlwiKVxuICAgIFxuICAgIGlmKHJlbW92ZUNvbW1lbnRzKXtcbiAgICAgICAgLy8gdGFnVGV4dCA9IHRhZ1RleHQucmVwbGFjZSgpXG4gICAgfVxuICAgIGlmKHJlcGxhY2VBdHRyaWJ1dGVWYWx1ZVF1b3Rlcyl7XG4gICAgICAgIC8vIHRhZ1RleHQgPSB0YWdUZXh0LnJlcGxhY2UoKVxuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKFwiY2xlYW5lZCB0YWdUZXh0IHN0cmluZzpcIiwgdGFnVGV4dClcbiAgICByZXR1cm4gdGFnVGV4dFxufVxuLypcblxuICAgIDxkaXY+PC9kaXY+XG4gICAgPGZvcmVpZ25PYmplY3Q+XG4gICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8c3ZnPlxuICAgICAgICAgICAgICAgIDxmb3JlaWduT2JqZWN0PjwvZm9yZWlnbk9iamVjdD5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2ZvcmVpZ25PYmplY3Q+XG4gICAgPGRpdj48L2Rpdj5cblxuKi9cbi8qKlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBuZXh0IHRhZyB3aXRoIHRoZSBwcm92aWRlZCAndGFnTmFtZScuXG4gKiBcbiAqIEBwYXJhbSB7Kn0gdGV4dCBcbiAqIEBwYXJhbSB7Kn0gdGFnTmFtZSAgXG4gKiBAcGFyYW0geyp9IGdldFRhZ0NvbnRlbnQgXG4gKi9cbmZ1bmN0aW9uIGdldFRhZ0dyb3VwQnlOYW1lKHRleHQ6IFN0cmluZywgdGFnTmFtZTogU3RyaW5nLCBnZXRUYWdDb250ZW50OiBCb29sZWFuKTogYW55IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIiAgICAgICAgICAgICBnZXRUYWdHcm91cEJ5TmFtZSAgICAgICAgICAgXCIpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIilcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0ZXh0OlwiLCB0ZXh0KVxuICAgICAgICBsZXQgdGFnR3JvdXAgPSBcIlwiXG4gICAgICAgIGxldCBjb250ZW50ID0gXCJcIlxuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IHVuZGVmaW5lZFxuICAgICAgICBsZXQgZW5kSW5kZXggPSB1bmRlZmluZWRcbiAgICAgICAgbGV0IGNvbnRlbnRTdGFydEluZGV4ID0gdW5kZWZpbmVkXG4gICAgICAgIGxldCBjb250ZW50RW5kSW5kZXggPSB1bmRlZmluZWRcblxuICAgICAgICBsZXQgdW5jbG9zZWRUYWdDbnQgPSAwXG4gICAgICAgIGNvbnN0IHVuY2xvc2VkVGFnRXhpc3RzID0gKCkgPT4gdW5jbG9zZWRUYWdDbnQgIT09IDBcblxuICAgICAgICBjb25zdCBvcGVuaW5nVGFnUmVnZXggPSBuZXcgUmVnRXhwKGBeKDwke3RhZ05hbWV9KD86W15cXFxcLz5dKik/KD86KD89KChcXFxcLyk+KSlcXFxcMnwoPzo+Lio/KD89PFxcXFwvJHt0YWdOYW1lfXw8JHt0YWdOYW1lfSkpKSlgKVxuICAgICAgICBjb25zdCBjbG9zaW5nVGFnUmVnZXggPSBuZXcgUmVnRXhwKGBeKDxcXFxcLyR7dGFnTmFtZX0+KD86Lio/KSg/PSg/OjxcXFxcLyR7dGFnTmFtZX0pfCg/Ojwke3RhZ05hbWV9KSl8KD86PFxcXFwvJHt0YWdOYW1lfT4pKWApXG5cbiAgICAgICAgLy8gZ28gdG8gc3RhcnQgb2YgdGhlIGZpcnN0IHRhZzpcbiAgICAgICAgY29uc3QgdGV4dEJlZm9yZVN0YXJ0ID0gdGV4dC5tYXRjaCgvKC4qPykoPz08Zm9yZWlnbk9iamVjdCkvKVxuICAgICAgICBzdGFydEluZGV4ID0gdGV4dEJlZm9yZVN0YXJ0WzBdLmxlbmd0aFxuICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleClcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJjdXQgdGV4dDpcIiwgdGV4dClcblxuICAgICAgICAvLyBhY2N1bXVsYXRlIHRhZyBncm91cFxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBsZXQgb3BlbmluZ1RhZ01hdGNoZXMgPSB1bmRlZmluZWRcbiAgICAgICAgICAgIGxldCBjbG9zaW5nVGFnTWF0Y2hlcyA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgLy8gMS4gYWNjdW11bGF0ZSBvcGVuaW5nIHRhZ3NcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBvcGVuaW5nVGFnTWF0Y2hlcyA9IHRleHQubWF0Y2gob3BlbmluZ1RhZ1JlZ2V4KVxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwib3BlbmluZyB0YWcgbWF0Y2g6XCIsIG9wZW5pbmdUYWdNYXRjaGVzKVxuICAgICAgICAgICAgICAgIGlmKG9wZW5pbmdUYWdNYXRjaGVzICE9PSBudWxsICYmIG9wZW5pbmdUYWdNYXRjaGVzWzBdICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcob3BlbmluZ1RhZ01hdGNoZXNbMF0ubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0YWdHcm91cCArPSBvcGVuaW5nVGFnTWF0Y2hlc1swXVxuICAgICAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGFjY3VtdWxhdGUgaWYgdGhlIHRhZyBpcyBhIHNlbGZjbG9zaW5nIHRhZyBcbiAgICAgICAgICAgICAgICAgICAgaWYob3BlbmluZ1RhZ01hdGNoZXNbMl0gPT09IFwiLz5cIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighdW5jbG9zZWRUYWdFeGlzdHMoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZ0dyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmNsb3NlZFRhZ0NudCArPSAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlKG9wZW5pbmdUYWdNYXRjaGVzICE9PSBudWxsICYmIG9wZW5pbmdUYWdNYXRjaGVzWzBdICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAvLyAyLiBhY2N1bXVsYXRlIGNsb3NpbmcgdGFnc1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGNsb3NpbmdUYWdNYXRjaGVzID0gdGV4dC5tYXRjaChjbG9zaW5nVGFnUmVnZXgpXG4gICAgICAgICAgICAgICAgaWYoY2xvc2luZ1RhZ01hdGNoZXMgIT09IG51bGwgJiYgY2xvc2luZ1RhZ01hdGNoZXNbMF0gIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZyhjbG9zaW5nVGFnTWF0Y2hlc1swXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRhZ0dyb3VwICs9IGNsb3NpbmdUYWdNYXRjaGVzWzBdXG4gICAgICAgICAgICAgICAgICAgIHVuY2xvc2VkVGFnQ250IC09IDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlKGNsb3NpbmdUYWdNYXRjaGVzICE9PSBudWxsICYmIGNsb3NpbmdUYWdNYXRjaGVzWzBdICE9PSB1bmRlZmluZWQpXG4gICAgICAgIH0gd2hpbGUodW5jbG9zZWRUYWdFeGlzdHMoKSlcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJhY2N1bXVsYXRlZCB0YWcgZ3JvdXA6XCIsIHRhZ0dyb3VwKVxuXG4gICAgICAgIC8vIGFkZCBlbmRJbmRleCB0byBiZSBhYmxlIHRvIGN1dCB0aGUgZ3JvdXAgYWZ0ZXIgZXh0cmFjdGluZyBpdC5cbiAgICAgICAgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgdGFnR3JvdXAubGVuZ3RoXG5cbiAgICAgICAgLy8gcmVtb3ZlIGZpcnN0IG9wZW5pbmcgYW5kIGxhc3QgY2xvc2luZyB0YWcgZnJvbSBhY2N1bXVsYXRlZCB0YWcgZ3JvdXBcbiAgICAgICAgLy8gUFJPQkxFTTogdGFnR3JvdXAgaXMganVzdCBhIHNlbGYgY2xvc2luZyB0YWcsIHdpdGhvdXQgY29udGVudFxuICAgICAgICAvLyBQUk9CTEVNOiB0YWdHcm91cCBoYXMgbm8gY29udGVudFxuICAgICAgICBpZihnZXRUYWdDb250ZW50KXtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0T3BlbmluZ1RhZ1JlZ2V4ID0gbmV3IFJlZ0V4cChgXjwke3RhZ05hbWV9KD86W15cXFxcLz5dKik/KFxcXFwvKT8+YClcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDbG9zaW5nVGFnUmVnZXggPSBuZXcgUmVnRXhwKGA8XFxcXC8ke3RhZ05hbWV9PiRgKVxuICAgICAgICAgICAgY29uc3QgZmlyc3RPcGVuaW5nVGFnTWF0Y2ggPSB0YWdHcm91cC5tYXRjaChmaXJzdE9wZW5pbmdUYWdSZWdleClcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDbG9zaW5nVGFnTWF0Y2ggPSB0YWdHcm91cC5tYXRjaChsYXN0Q2xvc2luZ1RhZ1JlZ2V4KVxuICAgICAgICAgICAgLy8gaWYgdGhlIHRhZyBncm91cCBpcyBhIHNlbGYgY2xvc2luZyB0YWcsIGl0IGhhcyBubyBjb250ZW50LlxuICAgICAgICAgICAgaWYoZmlyc3RPcGVuaW5nVGFnTWF0Y2hbMV0gPT09IFwiL1wiKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBIHNlbGZjbG9zaW5nIHRhZyBoYXMgbm8gY29udGVudC5cIilcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gXCJcIlxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gdGFnR3JvdXAuc3Vic3RyaW5nKGZpcnN0T3BlbmluZ1RhZ01hdGNoWzBdLmxlbmd0aCwgbGFzdENsb3NpbmdUYWdNYXRjaC5pbmRleClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnRTdGFydEluZGV4ID0gZmlyc3RPcGVuaW5nVGFnTWF0Y2hbMF0ubGVuZ3RoXG4gICAgICAgICAgICBjb250ZW50RW5kSW5kZXggPSBsYXN0Q2xvc2luZ1RhZ01hdGNoLmluZGV4XG4gICAgICAgIH1cblxuICAgICAgICBpZihnZXRUYWdDb250ZW50KXtcbiAgICAgICAgICAgcmV0dXJuIHsgdGFnR3JvdXAsIHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBjb250ZW50LCBjb250ZW50U3RhcnRJbmRleCwgY29udGVudEVuZEluZGV4IH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgcmV0dXJuIHsgdGFnR3JvdXAsIHN0YXJ0SW5kZXgsIGVuZEluZGV4IH1cbiAgICAgICAgfVxufVxuZnVuY3Rpb24gZ2V0VGFnR3JvdXBzKHRhZ1RleHQ6IFN0cmluZyl7XG4gICAgLy8gb3V0ZXIgY29udGV4dFxuICAgIGNvbnN0IHRhZ0dyb3VwczogQXJyYXk8U3RyaW5nPiA9IFtdXG5cbiAgICAvLyBleGVjdXRlIHRhZyBncm91cCBjcmVhdGlvblxuICAgIHdoaWxlKHRhZ1RleHQubGVuZ3RoID4gMCl7XG4gICAgICAgIGNvbnN0IGZpcnN0VGFnTmFtZSA9IGdldEZpcnN0VGFnTmFtZSh0YWdUZXh0KVxuICAgICAgICBpZihmaXJzdFRhZ05hbWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBsZXQgdGFnR3JvdXBTdHJpbmcgPSBjcmVhdGVUYWdHcm91cFN0cmluZyhmaXJzdFRhZ05hbWUsIGZhbHNlKVxuICAgICAgICAgICAgaWYodGFnR3JvdXBTdHJpbmcgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgdGFnR3JvdXBzLnB1c2godGFnR3JvdXBTdHJpbmcpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNyZWF0ZVRhZ0dyb3VwU3RyaW5nKGZpcnN0VGFnTmFtZSkgcmV0dXJuZWQgJ3VuZGVmaW5lZCcuXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YWdUZXh0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZmlyc3RUYWdOYW1lIGlzICd1bmRlZmluZWQnLiBZb3UgbXVzdCBoYXZlIGFuIGVycm9yIGluIHlvdXIgJ3RhZ1RleHQnLiBBcmUgeW91IG1pc3NpbmcgYSBjbG9zaW5nIHRhZz9cIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlubmVyIGZ1bmN0aW9uIHRoYXQgY2FuIHVzZSB0aGUgb3V0ZXIgY29udGV4dFxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhZ0dyb3VwU3RyaW5nKGZpcnN0VGFnTmFtZTogU3RyaW5nLCBkZWJ1ZzogQm9vbGVhbil7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFnR3JvdXBTdHJpbmcgPSBcIlwiXG4gICAgICAgIFxuICAgICAgICBsZXQgdW5jbG9zZWRUYWdDbnQgPSAwXG4gICAgICAgIGNvbnN0IHVuY2xvc2VkVGFnRXhpc3QgPSAoKSA9PiB1bmNsb3NlZFRhZ0NudCAhPT0gMFxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb3BlbmluZ1RhZ1JlZ2V4ID0gbmV3IFJlZ0V4cChgXig8JHtmaXJzdFRhZ05hbWV9KD86W15cXFxcLz5dKikoPzooPz0oKFxcXFwvKT4pKVxcXFwyfCg/Oj4uKj8oPz08XFxcXC8ke2ZpcnN0VGFnTmFtZX18PCR7Zmlyc3RUYWdOYW1lfSkpKSlgKVxuICAgICAgICBjb25zdCBjbG9zaW5nVGFnUmVnZXggPSBuZXcgUmVnRXhwKGBeKDxcXFxcLyR7Zmlyc3RUYWdOYW1lfT4oPzouKj8pKD89KD86PFxcXFwvJHtmaXJzdFRhZ05hbWV9KXwoPzo8JHtmaXJzdFRhZ05hbWV9KSl8KD86PFxcXFwvJHtmaXJzdFRhZ05hbWV9PikpYClcbiAgICAgICAgY29uc3QgbGFzdENsb3NpbmdUYWdSZWdleCA9IG5ldyBSZWdFeHAoYF4oPFxcLyR7Zmlyc3RUYWdOYW1lfVtePl0qPz4pYClcblxuICAgICAgICBkbyB7IFxuICAgICAgICAgICAgbGV0IG9wZW5pbmdUYWdNYXRjaGVzID0gdW5kZWZpbmVkXG4gICAgICAgICAgICBsZXQgY2xvc2luZ1RhZ01hdGNoZXMgPSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDEuIGFjY3VtdWxhdGUgb3BlbmluZyB0YWdzXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgb3BlbmluZ1RhZ01hdGNoZXMgPSB0YWdUZXh0Lm1hdGNoKG9wZW5pbmdUYWdSZWdleClcbiAgICAgICAgICAgICAgICBpZihvcGVuaW5nVGFnTWF0Y2hlcyAhPT0gbnVsbCAmJiBvcGVuaW5nVGFnTWF0Y2hlc1swXSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgdGFnVGV4dCA9IHRhZ1RleHQuc3Vic3RyaW5nKG9wZW5pbmdUYWdNYXRjaGVzWzBdLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGFnR3JvdXBTdHJpbmcgKz0gb3BlbmluZ1RhZ01hdGNoZXNbMF1cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBhY2N1bXVsYXRlIGlmIHRoZSB0YWcgaXMgYSBzZWxmY2xvc2luZyB0YWcgXG4gICAgICAgICAgICAgICAgICAgIGlmKG9wZW5pbmdUYWdNYXRjaGVzWzJdID09PSBcIi8+XCIgJiYgIXVuY2xvc2VkVGFnRXhpc3QoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFnR3JvdXBTdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2xvc2VkVGFnQ250ICs9IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUob3BlbmluZ1RhZ01hdGNoZXMgIT09IG51bGwgJiYgb3BlbmluZ1RhZ01hdGNoZXNbMF0gIT09IHVuZGVmaW5lZClcblxuICAgICAgICAgICAgLy8gMi4gYWNjdW11bGF0ZSBjbG9zaW5nIHRhZ3NcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRhZ1RleHQ6XCIsIHRhZ1RleHQpXG4gICAgICAgICAgICAgICAgY2xvc2luZ1RhZ01hdGNoZXMgPSAodW5jbG9zZWRUYWdDbnQgPT09IDEpIFxuICAgICAgICAgICAgICAgICAgICA/IHRhZ1RleHQubWF0Y2gobGFzdENsb3NpbmdUYWdSZWdleClcbiAgICAgICAgICAgICAgICAgICAgOiB0YWdUZXh0Lm1hdGNoKGNsb3NpbmdUYWdSZWdleClcbiAgICAgICAgICAgICAgICBpZihjbG9zaW5nVGFnTWF0Y2hlcyAhPT0gbnVsbCAmJiBjbG9zaW5nVGFnTWF0Y2hlc1swXSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgdGFnVGV4dCA9IHRhZ1RleHQuc3Vic3RyaW5nKGNsb3NpbmdUYWdNYXRjaGVzWzBdLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGFnR3JvdXBTdHJpbmcgKz0gY2xvc2luZ1RhZ01hdGNoZXNbMF1cbiAgICAgICAgICAgICAgICAgICAgdW5jbG9zZWRUYWdDbnQgLT0gMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUoY2xvc2luZ1RhZ01hdGNoZXMgIT09IG51bGwgJiYgY2xvc2luZ1RhZ01hdGNoZXNbMF0gIT09IHVuZGVmaW5lZClcblxuICAgICAgICB9IHdoaWxlKHVuY2xvc2VkVGFnRXhpc3QoKSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YWdHcm91cFN0cmluZ1xuICAgIH1cblxuICAgIC8vIGNoZWNrIHJlc3VsdFxuICAgIGlmKHRhZ0dyb3Vwcy5sZW5ndGggPCAxKXtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY3JlYXRlIHRhZyBncm91cHMgZm9yIFwiJHt0YWdUZXh0fVwiLiBTZWUgdGhlICd0YWdHcm91cHMnOiAke3RhZ0dyb3Vwc30uYClcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGFnR3JvdXBzXG4gICAgfVxufVxuXG5cblxuY29uc3QgU1ZHQW5jaG9ySWQgPSBgbm9kZXRlbXBsYXRlLXN2Zy1hbmNob3JgXG5jb25zdCBFQkFuY2hvcklkID0gYG5vZGV0ZW1wbGF0ZS1lYi1hbmNob3JgXG5jb25zdCBGT0FuY2hvcklkID0gYG5vZGV0ZW1wbGF0ZS1mby1hbmNob3JgXG5jb25zdCBGT0NvbnRlbnRBbmNob3JJZCA9IGBub2RldGVtcGxhdGUtZm8tY29udGVudC1hbmNob3ItYFxuZnVuY3Rpb24gaGFuZGxlVGFnR3JvdXAodGFnR3JvdXA6IFN0cmluZywgb3B0aW9uczogYW55KTogTm9kZSB7XG4gICAgbGV0IFNWR0FuY2hvckluZGV4ID0gMFxuICAgIGxldCBFQkFuY2hvckluZGV4ID0gMFxuICAgIGxldCBGT0FuY2hvckluZGV4ID0gMFxuICAgIC8vIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIilcbiAgICAvLyBjb25zb2xlLmxvZyhcIiAgICAgICAgICAgICBoYW5kbGVUYWdHcm91cCAgICAgICAgICAgICAgXCIpXG4gICAgLy8gY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKVxuICAgIC8vIGNvbnNvbGUubG9nKFwidGFnR3JvdXA6XCIsIHRhZ0dyb3VwKVxuICAgIC8qIFxuICAgICAgICB3b3JzdCB0YWdHcm91cCB0ZXh0IGNhc2VzOlxuICAgICAgICAxLlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgIDxzdmc+XG4gICAgICAgICAgICAgICAgPHN2Zz48L3N2Zz5cbiAgICAgICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAgICAgICAgPGZvcmVpZ25PYmplY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGc+PC9nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9yZWlnbk9iamVjdD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2ZvcmVpZ25PYmplY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JlaWduT2JqZWN0PlxuICAgICAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICAyLlxuICAgICAgICA8Zm9yZWlnbk9iamVjdD5cbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxzdmc+PC9zdmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgIDwvZm9yZWlnbk9iamVjdD5cblxuICAgICAgICAzLlxuICAgICAgICA8Zz5cbiAgICAgICAgICAgIDxmb3JlaWduT2JqZWN0PlxuICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgIDwvZm9yZWlnbk9iamVjdD5cbiAgICAgICAgPC9nPlxuXG4gICAgICAgIENVVCBPVVQgRk8gb3IgU1ZHOlxuICAgICAgICA8dGFnPlxuICAgICAgICAgICAgPHRhZz48L3RhZz5cbiAgICAgICAgICAgIDxjdXQ+XG4gICAgICAgICAgICAgICAgPHRhZz5cbiAgICAgICAgICAgICAgICAgICAgPGN1dD48L2N1dD5cbiAgICAgICAgICAgICAgICA8L3RhZz5cbiAgICAgICAgICAgIDwvY3V0PlxuICAgICAgICAgICAgPGN1dD48L2N1dD5cbiAgICAgICAgICAgIDx0YWc+PC90YWc+XG4gICAgICAgIDwvdGFnPlxuICAgICovXG4gICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpXG4gICAgbGV0IHsgdHlwZSwgYWRkWE1MTlMgfSA9IG9wdGlvbnNcblxuICAgIC8vIDEuIGFuYWx5emUgdHlwZVxuICAgIC8vIGNvbnNvbGUubG9nKFwidHlwZTpcIiwgdHlwZSlcbiAgICBpZih0eXBlID09PSB1bmRlZmluZWQpe1xuICAgICAgICBsZXQgdGFnTmFtZSA9IGdldEZpcnN0VGFnTmFtZSh0YWdHcm91cClcblxuICAgICAgICBhZGRYTUxOUyA9IHRydWVcbiAgICAgICAgdHlwZSA9IHVuZGVmaW5lZFxuXG4gICAgICAgIGlmKHRhZ05hbWUgPT09IFwiZGl2XCIpe1xuICAgICAgICAgICAgdHlwZSA9IFwiaHRtbFwiXG4gICAgICAgIH0gZWxzZSBpZih0YWdOYW1lID09PSBcInN2Z1wiIHx8IHRhZ05hbWUgPT09IFwiZ1wiIHx8IHRhZ05hbWUgPT09IFwiZm9yZWlnbk9iamVjdFwiKXtcbiAgICAgICAgICAgIHR5cGUgPSBcInN2Z1wiXG4gICAgICAgIH0gZWxzZSBpZihNVVRVQUxfVEFHX05BTUVTLmluY2x1ZGVzKHRhZ05hbWUpKXtcbiAgICAgICAgICAgIHN3aXRjaCh0YWdOYW1lKXtcbiAgICAgICAgICAgICAgICAvLyBJLiBDT05DUkVURSBDQVNFUzpcbiAgICAgICAgICAgICAgICAvLyAxLiBEb2Vzbid0IG1hdHRlciBpZiBpdCdzIGhhbmRsZWQgYXMgSFRNTCBvciBTVkcsIGRlZmF1bHQ6IEhUTUwuIChub3Qgc28gY29uY3JldGUpXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcmlwdFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgICAgICAgICBhZGRYTUxOUyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcImh0bWxcIlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIC8vIDIuIEVtYmVkZGVkIENvbnRlbnQgaGFzIHRvIGJlIEhUTUwuXG4gICAgICAgICAgICAgICAgY2FzZSBcImF1ZGlvXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImNhbnZhc1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJpZnJhbWVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwidmlkZW9cIjpcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IFwiaHRtbFwiXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgLy8gSUkuIElOQ09OQ1JFVEUgQ0FTRVM6XG4gICAgICAgICAgICAgICAgLy8gMS4gTXV0dWFsIHRhZ3MsIG92ZXJyaWRhYmxlIGRlZmF1bHQ6IFNWRyBcbiAgICAgICAgICAgICAgICBjYXNlIFwiZm9udFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0aXRsZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZihvcHRpb25zLm11dHVhbC5hLmlzSFRNTCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gXCJodG1sXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcInN2Z1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0YWdOYW1lID09PSBcInRpdGxlXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5BYm91dChcInRpdGxlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5BYm91dChcImZvbnRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIC8vIDIuIE11dHVhbCB0YWdzLCBvdmVycmlkYWJsZSBkZWZhdWx0OiBIVE1MIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMubXV0dWFsLmEuaXNTVkcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IFwic3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcImh0bWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybkFib3V0KFwiYVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiB3YXJuQWJvdXQodDogU3RyaW5nKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFlvdSBwcm92aWRlZCBhbiA8JHt0fT48LyR7dH0+IHRhZyBhcyBhIHRhZy1ncm91cCAob3Igcm9vdCBub2RlLCByZWZlcnJpbmcgdG8gdGhlIHN0cmluZyBpbnB1dCBjb250ZXh0KS5gKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhlIDwke3R9PjwvJHt0fT4gdGFnIGV4aXN0cyBpbiBIVE1MIGFuZCBTVkcgbmFtZXNwYWNlLmApXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbiB0aGlzIHNpdHVhdGlvbiwgYXMgZGVmYXVsdCwgaXQgd2lsbCBiZSBoYW5kbGVkIGxpa2UgJHt0eXBlLnRvVXBwZXJDYXNlKCl9LmApXG4gICAgICAgICAgICAgICAgaWYodHlwZSA9PT0gXCJodG1sXCIpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEl0IHdpbGwgaGF2ZSB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiBzZXQsIGFuZCBwYXJzZWQgYXMgXCJ0ZXh0L2h0bWxcIiBieSB0aGUgJ0RPTVBhcnNlcicuYClcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBZb3UgY2FuIGZvcmNlIFNWRyBjcmVhdGlvbiBieSBwYXNzaW5nIGEgdHJ1ZSBzZXQgYm9vbGVhbiBhdCBcIm9wdGlvbnMubXV0dWFsLmEuaXNTVkdcIiwgdG8gdGhlIG9wdGlvbmFsIHBhcmFtZXRlcnMgb2JqZWN0IGluIHRoZSBjb25zdHJ1Y3RvciBjYWxsLmApXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXFxuRVhBTUxQTEU6YClcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBjb25zdCBzdmdDb250ZW50ID0gbmV3IE5vZGVUZW1wbGF0ZShcXGA8JHt0fT48LyR7dH0+XFxgLCB7IG11dHVhbDogeyAke3R9OiB7IGlzU1ZHOiB0cnVlIH0gfSB9KWApXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwic3ZnXCIpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEl0IHdpbGwgaGF2ZSB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgc2V0LCBhbmQgcGFyc2VkIGFzIFwiaW1hZ2Uvc3ZnK3htbFwiIGJ5IHRoZSAnRE9NUGFyc2VyJy5gKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFlvdSBjYW4gZm9yY2UgSFRNTCBjcmVhdGlvbiBieSBwYXNzaW5nIGEgdHJ1ZSBzZXQgYm9vbGVhbiBhdCBcIm9wdGlvbnMubXV0dWFsLmEuaXNIVE1MXCIsIHRvIHRoZSBvcHRpb25hbCBwYXJhbWV0ZXJzIG9iamVjdCBpbiB0aGUgY29uc3RydWN0b3IgY2FsbC5gKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFxcbkVYQU1MUExFOmApXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgY29uc3QgaHRtbENvbnRlbnQgPSBuZXcgTm9kZVRlbXBsYXRlKFxcYDwke3R9PjwvJHt0fT5cXGAsIHsgbXV0dWFsOiB7ICR7dH06IHsgaXNIVE1MOiB0cnVlIH0gfSB9KWApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgfSBlbHNlIGlmKFRBR19OQU1FU19IVE1MLmluY2x1ZGVzKHRhZ05hbWUpKXtcbiAgICAgICAgICAgIHR5cGUgPSBcImh0bWxcIlxuICAgICAgICB9IGVsc2UgaWYoVEFHX05BTUVTX1NWRy5pbmNsdWRlcyh0YWdOYW1lKSl7XG4gICAgICAgICAgICB0eXBlID0gXCJzdmdcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZGV0ZWN0IHR5cGUgZm9yIHRhZ05hbWU6ICR7dGFnTmFtZX0uYClcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhcInR5cGU6XCIsIHR5cGUpXG5cbiAgICAvLyAyLiBhZGQgeG1sbnNcbiAgICBpZihhZGRYTUxOUyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgYWRkWE1MTlMgPSB0cnVlXG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKFwiYWRkWE1MTlM6XCIsIGFkZFhNTE5TKVxuICAgIGlmKGFkZFhNTE5TKXtcbiAgICAgICAgaWYodHlwZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJTb21ldGhpbmcgd2VudCB3cm9uZyBpbiB0eXBlIGRldGVjdGlvbi4gVmFyaWFibGUgJ3R5cGUnIHNob3VsZCBub3QgYmUgdW5kZWZpbmVkLlwiKVxuICAgICAgICBsZXQgWE1MTlMgPSAodHlwZSA9PT0gXCJodG1sXCIpID8gWE1MTlNfWEhUTUwgOiBYTUxOU19TVkdcbiAgICAgICAgLy8gZm9yIHRoZSBmaXJzdCB0YWcgcmVwbGFjZSBleGlzdGluZyB4bWxuc1xuICAgICAgICB0YWdHcm91cCA9IHRhZ0dyb3VwLnJlcGxhY2UoL14oPFthLXpBLVpdKyg/Olxcc1tePl0qKT8pKFxcc3htbG5zPVtcIiddW15cIiddKltcIiddKS8sIGAkMWApXG4gICAgICAgIHRhZ0dyb3VwID0gdGFnR3JvdXAucmVwbGFjZSgvXig8KFthLXpBLVpdKykpXFxiKCg/OltePl0qPi4qPykoPFxcL1xcMj4pKykvLCBgJDEgeG1sbnM9XCIke1hNTE5TfVwiJDNgKVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhcInRhZ0dyb3VwIGFmdGVyIHhtbG5zOlwiLCB0YWdHcm91cClcbiAgICAgICAgXG4gICAgLy8gMy4gc3BsaXQgb3IgcGFyc2VcbiAgICBpZih0eXBlID09PSBcImh0bWxcIil7XG4gICAgICAgIGNvbnN0IFNWR05vZGVzID0gW11cbiAgICAgICAgd2hpbGUoY29udGFpbnNTVkcodGFnR3JvdXApKXtcbiAgICAgICAgICAgIGxldCBTVkdUZXh0ID0gdW5kZWZpbmVkXG4gICAgICAgICAgICB0YWdHcm91cCA9IHRhZ0dyb3VwLnJlcGxhY2UoLyg8c3ZnXFxiKD86W14+XSo+Lio/KSg/OjxcXC9zdmc+KSspLywgbWF0Y2ggPT4ge1xuICAgICAgICAgICAgICAgIFNWR1RleHQgPSBtYXRjaFxuICAgICAgICAgICAgICAgIHJldHVybiBgPGEgaWQ9XCIke1NWR0FuY2hvcklkfS0ke1NWR0FuY2hvckluZGV4fVwiPjwvYT5gICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYoU1ZHVGV4dCAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgU1ZHQW5jaG9ySW5kZXgrK1xuICAgICAgICAgICAgICAgIGxldCBTVkdOb2RlID0gaGFuZGxlVGFnR3JvdXAoU1ZHVGV4dCwgeyB0eXBlOiBcInN2Z1wiIH0pXG4gICAgICAgICAgICAgICAgaWYgKFNWR05vZGUgPT09IG51bGwgfHwgU1ZHTm9kZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHBhcnNlIFNWRy5cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgU1ZHTm9kZXMucHVzaChTVkdOb2RlKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ5b3Ugd2FudGVkIHRvIHBhcnNlIG9uZSBvciBtdWx0aXBsZSBzdmctdHlwZSB0YWctZ3JvdXBzIGJ1dCBzb21ldGhpbmcgaXMgd3Jvbmcgd2l0aCB5b3VyIHN0cmluZy4gbWlzc2luZyBjbG9zaW5nIHRhZz9cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBIVE1MRG9jdW1lbnQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRhZ0dyb3VwLCBcInRleHQvaHRtbFwiKVxuICAgICAgICBTVkdOb2Rlcy5mb3JFYWNoKChTVkcsIGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IEhUTUxEb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtTVkdBbmNob3JJZH0tJHtpZHh9YClcbiAgICAgICAgICAgIGFuY2hvck5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoU1ZHLCBhbmNob3JOb2RlKVxuICAgICAgICAgICAgYW5jaG9yTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFuY2hvck5vZGUpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZmluaXNoZWQgSFRNTERvY3VtZW50LlwiKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNvbnRlbnQ6XCIsIEhUTUxEb2N1bWVudC5ib2R5LmZpcnN0RWxlbWVudENoaWxkKVxuICAgICAgICByZXR1cm4gSFRNTERvY3VtZW50LmJvZHkuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB9XG4gICAgZWxzZSBpZih0eXBlID09PSBcInN2Z1wiKXtcbiAgICAgICAgY29uc3QgRUJOb2RlcyA9IFtdXG4gICAgICAgIHdoaWxlKGNvbnRhaW5zRUIodGFnR3JvdXApICYmICEvYXVkaW98Y2FudmFzfGlmcmFtZXx2aWRlby8udGVzdChnZXRGaXJzdFRhZ05hbWUodGFnR3JvdXApKSl7XG4gICAgICAgICAgICBsZXQgRUJUZXh0ID0gXCJcIlxuICAgICAgICAgICAgdGFnR3JvdXAgPSB0YWdHcm91cC5yZXBsYWNlKC88KD89KGF1ZGlvfGNhbnZhc3xpZnJhbWV8dmlkZW8pKVxcMVxcYig/OltePl0qPi4qPykoPzo8XFwvXFwxPikrLywgbWF0Y2ggPT4ge1xuICAgICAgICAgICAgICAgIEVCVGV4dCA9IG1hdGNoXG4gICAgICAgICAgICAgICAgcmV0dXJuIGA8YSBpZD1cIiR7RUJBbmNob3JJZH0tJHtFQkFuY2hvckluZGV4fVwiPjwvYT5gICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgRUJBbmNob3JJbmRleCsrXG4gICAgICAgICAgICBpZihFQlRleHQgIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIGxldCBFQk5vZGUgPSBoYW5kbGVUYWdHcm91cChFQlRleHQsIHsgdHlwZTogXCJodG1sXCIgfSlcbiAgICAgICAgICAgICAgICBpZiAoRUJOb2RlID09PSBudWxsIHx8IEVCTm9kZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHBhcnNlIEVtYmVkZGVkIENvbnRlbnQuXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEVCTm9kZXMucHVzaChFQk5vZGUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInlvdSB3YW50ZWQgdG8gcGFyc2Ugb25lIG9yIG11bHRpcGxlIHN2Zy10eXBlIHRhZy1ncm91cHMgYnV0IHNvbWV0aGluZyBpcyB3cm9uZyB3aXRoIHlvdXIgc3RyaW5nLiBtaXNzaW5nIGNsb3NpbmcgdGFnP1wiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgRk9Ob2RlcyA9IFtdXG4gICAgICAgIGNvbnN0IEZPQ29udGVudE5vZGVzID0gW11cbiAgICAgICAgd2hpbGUoY29udGFpbnNGTyh0YWdHcm91cCkgJiYgZ2V0Rmlyc3RUYWdOYW1lKHRhZ0dyb3VwKSAhPT0gXCJmb3JlaWduT2JqZWN0XCIpe1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICA8cmVjdC8+PGZvcmVpZ25PYmplY3Q+PGRpdj48aDE+am88L2gxPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48cmVjdC8+PGZvcmVpZ25PYmplY3Q+c29tZXRoaW5nPC9mb3JlaWduT2JqZWN0PlxuICAgICAgICAgICAgICAgIGJlY29tZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnR3JvdXA6IFwiPGZvcmVpZ25PYmplY3Q+PGRpdj48aDE+am88L2gxPjwvZGl2PjwvZm9yZWlnbk9iamVjdD5cIixcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleDogNyxcbiAgICAgICAgICAgICAgICAgICAgZW5kSW5kZXg6IDQ5LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIjxkaXY+PGgxPmpvPC9oMT48L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFN0YXJ0SW5kZXg6IDIyLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RW5kSW5kZXg6IDMzLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA9PiBGT05vZGVzID0gWyBcIjxmb3JlaWduT2JqZWN0PjxhIGlkPVwiZm8tY29udGVudC0wXCI+PC9hPjwvZm9yZWlnbk9iamVjdD5cIiBdXG4gICAgICAgICAgICAgICAgPT4gRk9Db250ZW50Tm9kZXMgPSBbIFwiPGRpdj48aDE+am88L2gxPjwvZGl2PlwiIF1cbiAgICAgICAgICAgICAgICA9PiA8cmVjdC8+PGEgaWQ9XCJmby0wXCI+PHJlY3QvPjxmb3JlaWduT2JqZWN0PnNvbWV0aGluZzwvZm9yZWlnbk9iamVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IC0+IHRoaXMgd2lsbCBiZSB0aGUgbmV4dCBmb3JlaWduIG9iamVjdCBjYXVzZSBmb3JlaWduT2JqZWN0RXhpc3RzKClcbiAgICAgICAgICAgICAgICBUSEVOOlxuICAgICAgICAgICAgICAgIGlmIG5vIG1vcmUgZm9yZWlnbiBvYmplY3RzIGV4aXN0OlxuICAgICAgICAgICAgICAgIC0gcGFyc2Ugc3ZnXG4gICAgICAgICAgICAgICAgLSBhZGQgcGFyc2VkIGZvcmVpZ25PYmplY3RzID0+IHBhcnNlIGFzIHN2Z1xuICAgICAgICAgICAgICAgIC0gYWRkIHBhcnNlZCBmb3JlaWduT2JqZWN0IGNvbnRlbnQgdG8gZm9yZWlnbk9iamVjdHMgPT4gaGFuZGxlVGFnR3JvdXAoKSBcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBsZXQgZm8gPSBnZXRUYWdHcm91cEJ5TmFtZSh0YWdHcm91cCwgXCJmb3JlaWduT2JqZWN0XCIsIHRydWUpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmbyBhbmQgYWRkIHJlcGxhY2VtZW50IGFuY2hvclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0YWdHcm91cCBiZWZvcmUgcmVtb3ZlIGZvOlwiLCB0YWdHcm91cClcbiAgICAgICAgICAgIHRhZ0dyb3VwID0gdGFnR3JvdXAuc3Vic3RyaW5nKDAsIGZvLnN0YXJ0SW5kZXgpICsgdGFnR3JvdXAuc3Vic3RyaW5nKGZvLmVuZEluZGV4KVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0YWdHcm91cCBhZnRlciByZW1vdmUgZm86XCIsIHRhZ0dyb3VwKVxuICAgICAgICAgICAgY29uc3QgYmVmb3JlRk8gPSB0YWdHcm91cC5zbGljZSgwLCBmby5zdGFydEluZGV4KVxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJGTyA9IHRhZ0dyb3VwLnNsaWNlKGZvLnN0YXJ0SW5kZXgpXG4gICAgICAgICAgICB0YWdHcm91cCA9IGJlZm9yZUZPLmNvbmNhdChgPGEgaWQ9XCIke0ZPQW5jaG9ySWR9LSR7Rk9BbmNob3JJbmRleH1cIj48L2E+YCkuY29uY2F0KGFmdGVyRk8pXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRhZ0dyb3VwIGFmdGVyIGFkZCBhbmNob3I6XCIsIHRhZ0dyb3VwKVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmbyBjb250ZW50IGFuZCBhZGQgcmVwbGFjZW1lbnQgYW5jaG9yIFxuICAgICAgICAgICAgY29uc3QgYmVmb3JlRk9Db250ZW50ID0gZm8udGFnR3JvdXAuc2xpY2UoMCwgZm8uY29udGVudFN0YXJ0SW5kZXgpXG4gICAgICAgICAgICBjb25zdCBhZnRlckZPQ29udGVudCA9IGZvLnRhZ0dyb3VwLnNsaWNlKGZvLmNvbnRlbnRFbmRJbmRleClcbiAgICAgICAgICAgIGZvLnRhZ0dyb3VwID0gYmVmb3JlRk9Db250ZW50LmNvbmNhdChgPGEgaWQ9XCIke0ZPQ29udGVudEFuY2hvcklkfS0ke0ZPQW5jaG9ySW5kZXh9XCI+PC9hPmApLmNvbmNhdChhZnRlckZPQ29udGVudClcbiAgICAgICAgICAgIC8vIHBhcnNlIGZvXG4gICAgICAgICAgICBGT05vZGVzLnB1c2goaGFuZGxlVGFnR3JvdXAoZm8udGFnR3JvdXAsIHsgdHlwZTogXCJzdmdcIiB9KSlcbiAgICAgICAgICAgIC8vIHBhcnNlIGZvIGNvbnRlbnRzXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImZvOlwiLCBmbylcbiAgICAgICAgICAgIGlmKGZvLmNvbnRlbnQubGVuZ3RoICE9PSAwKXtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNhbGxpbmcgZ2V0VGFnR3JvdXBzIHdpdGggZm8uY29udGVudDpcIiwgZm8uY29udGVudClcbiAgICAgICAgICAgICAgICBjb25zdCBGT0NvbnRlbnRUZXh0cyA9IGdldFRhZ0dyb3Vwcyhmby5jb250ZW50KVxuICAgICAgICAgICAgICAgIEZPQ29udGVudE5vZGVzLnB1c2goRk9Db250ZW50VGV4dHMubWFwKHRnID0+IGhhbmRsZVRhZ0dyb3VwKHRnLCB7IHR5cGU6IFwiaHRtbFwiIH0pKSlcbiAgICAgICAgICAgICAgICBGT0FuY2hvckluZGV4KytcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBhcnNlIHN2Z1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInBhcnNpbmcgU1ZHOlwiLCB0YWdHcm91cClcbiAgICAgICAgY29uc3QgU1ZHRG9jdW1lbnQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRhZ0dyb3VwLCBcImltYWdlL3N2Zyt4bWxcIilcbiAgICAgICAgLy8gY29uc29sZS5sb2coU1ZHRG9jdW1lbnQpXG4gICAgICAgIC8vIGFkZCBmb3MgXG4gICAgICAgIEZPTm9kZXMuZm9yRWFjaCgoRk8sIGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yTm9kZSA9IFNWR0RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke0ZPQW5jaG9ySWR9LSR7aWR4fWApXG4gICAgICAgICAgICBhbmNob3JOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEZPLCBhbmNob3JOb2RlKVxuICAgICAgICAgICAgYW5jaG9yTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFuY2hvck5vZGUpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGFkZCBmb0NvbnRlbnRzXG4gICAgICAgIEZPQ29udGVudE5vZGVzLmZvckVhY2goKEZPQ29udGVudCwgaWR4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbmNob3JOb2RlID0gU1ZHRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7Rk9Db250ZW50QW5jaG9ySWR9LSR7aWR4fWApXG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgICAgIEZPQ29udGVudC5mb3JFYWNoKHggPT4gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoeCkpXG4gICAgICAgICAgICBhbmNob3JOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZyYWdtZW50LCBhbmNob3JOb2RlKVxuICAgICAgICAgICAgYW5jaG9yTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFuY2hvck5vZGUpXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGFkZCBlYnNcbiAgICAgICAgRUJOb2Rlcy5mb3JFYWNoKChFQiwgaWR4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbmNob3JOb2RlID0gU1ZHRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7RUJBbmNob3JJZH0tJHtpZHh9YClcbiAgICAgICAgICAgIGFuY2hvck5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRUIsIGFuY2hvck5vZGUpXG4gICAgICAgICAgICBhbmNob3JOb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYW5jaG9yTm9kZSlcbiAgICAgICAgfSlcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJmaW5pc2hlZCBTVkdEb2N1bWVudC5cIilcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJjb250ZW50OlwiLCBTVkdEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gICAgICAgIHJldHVybiBTVkdEb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICB9XG59XG5cbi8vIGhlbHBlcnMgKGNvbnN0cnVjdG9yKVxuZnVuY3Rpb24gZ2V0Rmlyc3RUYWdOYW1lKHRhZ1RleHQ6IFN0cmluZyk6IFN0cmluZyB7XG4gICAgLy8gY29uc29sZS5sb2coXCJ0YWdUZXh0OlwiLCB0YWdUZXh0KVxuICAgIGxldCBtYXRjaGVzID0gdGFnVGV4dC5tYXRjaCgvXjwoW2EtekEtWlxcZF0rKS8pXG4gICAgcmV0dXJuIChtYXRjaGVzICE9PSBudWxsKSA/IG1hdGNoZXNbMV0gOiB1bmRlZmluZWRcbn1cbmZ1bmN0aW9uIGNvbnRhaW5zU1ZHKHRhZ1RleHQ6IFN0cmluZyk6IEJvb2xlYW4ge1xuICAgIHJldHVybiAvPHN2Zy8udGVzdCh0YWdUZXh0KVxufVxuZnVuY3Rpb24gY29udGFpbnNGTyh0YWdUZXh0OiBTdHJpbmcpOiBCb29sZWFuIHtcbiAgICByZXR1cm4gLzxmb3JlaWduT2JqZWN0Ly50ZXN0KHRhZ1RleHQpXG59XG5mdW5jdGlvbiBjb250YWluc0VCKHRhZ1RleHQ6IFN0cmluZyk6IEJvb2xlYW4ge1xuICAgIHJldHVybiAvPCg/PShhdWRpb3xjYW52YXN8aWZyYW1lfHZpZGVvKSlcXDEvLnRlc3QodGFnVGV4dCkgICBcbn1cbi8qKlxuICogVGhlIGl0ZXJhdGUgZnVuY3Rpb24gZ2V0cyBhIG5vZGUgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb24uLi4gXG4gKiBJdCBzdGFydHMgaXRlcmF0aW5nIHRoZSBkb20gZnJvbSB0aGUgbm9kZSwgcmVjdXJzaXZlbHkgZXhlY3V0aW5nIHRoZSBjYWxsYmFjay5cbiAqIElmIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpdHNlbGYgZG9lcyBub3QgY2FsbCAncmV0dXJuJywgdGhlIGl0ZXJhdGUgZnVuY3Rpb25cbiAqIHdpbGwgcmV0dXJuIGZhbHNlIGFmdGVyIGV4ZWN1dGluZyB0aGUgcmVjdXJzaW9uLlxuICovXG5jb25zdCBpdGVyYXRlID0gKG46IE5vZGUsIGNiOiBGdW5jdGlvbikgPT4ge1xuICAgIGxldCBpdENvdW50ZXIgPSAwXG4gICAgY29uc3QgaXRlcmF0ZSA9IChuKSA9PiB7XG4gICAgICAgIGlmIChuICE9PSBudWxsICYmIG4ubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrIHdpdGggdmFsaWRhdGVkIG5vZGUuXG4gICAgICAgICAgICBjYihuKVxuICAgICAgICAgICAgaXRDb3VudGVyKytcbiAgICAgICAgICAgIC8vIHRyYXZlcnNlLi4uXG4gICAgICAgICAgICBpZiAobi5oYXNDaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0ZShuLmZpcnN0RWxlbWVudENoaWxkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG4ubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0ZShuLm5leHRFbGVtZW50U2libGluZylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpdENvdW50ZXIgPT09IDApe1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgJ05vZGUnLlwiKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXRlcmF0ZShuKVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuLy8gaGVscGVycyAobWV0aG9kcylcbmZ1bmN0aW9uIGdldFF1ZXJ5VHlwZShxdWVyeTogU3RyaW5nIHwgTm9kZSk6IFN0cmluZyB7XG4gICAgcmV0dXJuICBxdWVyeSBpbnN0YW5jZW9mIE5vZGUgPyBcIk5vZGVcIiA6IFxuICAgICAgICAgICAgcXVlcnkuY2hhckF0KDApID09PSBcIi5cIiA/IFwiaWRcIiA6IFxuICAgICAgICAgICAgcXVlcnkuY2hhckF0KDApID09PSBcIiNcIiA/IFwiY2xhc3NcIiA6IFwicXVlcnlcIlxufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9